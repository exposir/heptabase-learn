<!--
- [INPUT]: HTML5 Video API, MediaSource Extensions (MSE), WebRTC 1.0, Canvas Pixel Manipulation
- [OUTPUT]: 现代多媒体场景的编程题目大纲与实现要求
- [POS]: 编程题/ 复杂场景专题，涵盖流媒体与图形学基础
- [PROTOCOL]: 变更时更新此头部，然后检查 CLAUDE.md
-->

# 3.2 音视频与媒体

Web 媒体技术的演进不仅改变了内容的呈现方式，更在性能与实时性上提出了极高的要求。本专题聚焦多媒体技术的底层原理与实战场景。

---

### 3.2.1 视频播放器封装 ⭐⭐⭐

**要求：** 基于原生 HTML5 Video API，封装一个具备工业级稳定性的播放器核心逻辑。

- **功能清单：**
  - 健壮的**播放状态机**设计（处理 Loading, Playing, Paused, Seeking, Error）
  - 清晰度动态切换逻辑（HLS/DASH 基础原理）
  - 倍速播放与自定义控制条同步
  - 高性能**弹幕渲染**引擎（Canvas vs DOM 方案）
  - 首帧加载优化 (First Frame Optimization)

---

### 3.2.2 音视频录制 ⭐⭐⭐

**要求：** 使用浏览器原生能力实现多场景的录制功能。

- **核心 API 指标：**
  - `MediaRecorder`: 数据分片存储与编码转换
  - `getUserMedia`: 摄像头与麦克风权限流处理
  - `getDisplayMedia`: 屏幕共享与系统音频采集
  - 录制状态的持久化与异常恢复

---

### 3.2.3 WebRTC 实时通信 ⭐⭐⭐⭐

**要求：** 理解 P2P 通信链路的建立过程，并能够模拟信令交换流程。

- **核心概念：**
  - 信令服务器 (Signaling Server) 的职责与实现
  - ICE/STUN/TURN: 穿透内网的寻址机制
  - 架构选型深度理解：Mesh vs SFU vs MCU
  - 媒体轨迹 (MediaStreamTrack) 的动态伸缩与质量控制

---

### 3.2.4 图像处理与图形学基础 ⭐⭐⭐

**要求：** 使用 Canvas 或 WebGL 处理底层像素数据。

- **实战场景：**
  - 基于像素矩阵的图片裁剪与动态压缩算法
  - 纯黑白、高斯模糊等经典**滤镜效果**的底层实现
  - EXIF 元数据解析与方位纠正
  - 使用 `OffscreenCanvas` 进行多线程图形渲染优化

---

## 质量指标

- **解码性能**：高分辨率视频下的 CPU/GPU 占用率。
- **实时性**：WebRTC 延迟控制与音画同步 (Lipsync) 效果。
- **内存管理**：处理大文件录制或高清图像时的内存泄漏规避。
