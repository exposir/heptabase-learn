<!--
- [INPUT]: 浏览器事件模型 (Mouse/Touch Events), requestAnimationFrame, 碰撞检测原理
- [OUTPUT]: 高级交互场景的编程题目大纲与实现要求
- [POS]: 编程题/ 复杂场景专题，聚焦高交互细节与性能优化
- [PROTOCOL]: 变更时更新此头部，然后检查 CLAUDE.md
-->

# 3.1 复杂交互与动画

在前端进阶中，交互与动画的实现能力是衡量一个开发者对浏览器底层机制（如 Event Loop, Rendering Pipeline）掌握程度的重要标准。

---

### 3.1.1 手势系统设计 ⭐⭐⭐⭐

**要求：** 实现一个基础的手势识别系统，能够识别并区分不同的用户意图。

- **核心挑战：**
  - 手势识别逻辑（如何区分 Tap, Long Press, Pan）
  - 多指手势处理（Pinch 缩放、Rotate 旋转的坐标算法）
  - 手势冲突解决机制（如嵌套滚动时的手势捕获）
  - 惯性滚动 (Inertial Scrolling) 的数学模拟
  - 统一的事件抽象层（Pointer Events 适配）

---

### 3.1.2 复杂动画编排 ⭐⭐⭐

**要求：** 设计一个可控的动画管理系统，用于高效管理复杂的视觉反馈。

- **核心挑战：**
  - 动画时间轴 (Timeline) 的设计与管理
  - 动画任务的串行 (Sequence) 与并行 (Parallel) 组合实现
  - 滚动驱动动画 (Scroll-driven Animations) 的性能优化
  - 播放状态控制：暂停 (Pause)、恢复 (Resume)、倒放 (Reverse)
  - 基于 `requestAnimationFrame` 的精度补偿与掉帧处理

---

### 3.1.3 拖拽排序系统 ⭐⭐⭐

**要求：** 手写实现一个流畅的拖拽排序逻辑，不依赖第三方库。

- **核心挑战：**
  - 拖拽过程中的实时占位符 (Placeholder) 计算
  - 跨容器拖拽 (Cross-container Dragging) 的坐标修正
  - 边界自动滚动 (Auto-scrolling) 逻辑
  - 键盘可访问性支持 (Keyboard Accessibility)

---

### 3.1.4 移动端滚动细节 ⭐⭐⭐

**要求：** 解决移动端 Hybrid 或 Web App 中常见的滚动体验问题。

- **核心挑战：**
  - 滚动穿透 (Scroll Penetration) 的跨端完美兼容方案
  - iOS 橡皮筋效果 (Rubber Banding) 的精准控制
  - 嵌套滚动 (Nested Scrolling) 的手势传递与竞争处理
  - 下拉刷新 (Pull-to-refresh) 与原生滚动的冲突规避
  - 虚拟键盘弹出时对布局高度的实时纠正

---

## 质量指标

- **交互流畅度**：是否达到 60fps，复杂计算是否阻塞主线程。
- **状态一致性**：交互过程中状态机是否严谨，是否存在中间无响应状态。
- **边界鲁棒性**：异常操作（如快速切换、意外中断）时的系统恢复能力。
