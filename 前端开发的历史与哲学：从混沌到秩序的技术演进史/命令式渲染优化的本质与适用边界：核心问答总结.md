<!--
- [INPUT]: ä¾èµ–å‰åºè®¨è®ºä¸­å¯¹Zustandã€Reactè¿è¡Œæ—¶ã€Preactã€å¹¶è¡Œæ¸²æŸ“çš„ç†è§£
- [OUTPUT]: æä¾›å‘½ä»¤å¼æ¸²æŸ“ä¼˜åŒ–çš„æœ¬è´¨æ¾„æ¸…ã€é€‚ç”¨è¾¹ç•Œåˆ†æã€æŠ€æœ¯é€‰æ‹©å†³ç­–çŸ©é˜µ
- [POS]: å‰ç«¯å¼€å‘çš„å†å²ä¸å“²å­¦ç›®å½•ä¸‹çš„æ€»ç»“æ€§æ–‡æ¡£ï¼Œä½œä¸ºå‘½ä»¤å¼æ¸²æŸ“ä¼˜åŒ–ç³»åˆ—çš„æœ€ç»ˆç»“è®º
- [PROTOCOL]: å˜æ›´æ—¶æ›´æ–°æ­¤å¤´éƒ¨ï¼Œç„¶åæ£€æŸ¥ CLAUDE.md
-->

# å‘½ä»¤å¼æ¸²æŸ“ä¼˜åŒ–çš„æœ¬è´¨ä¸é€‚ç”¨è¾¹ç•Œï¼šæ ¸å¿ƒé—®ç­”æ€»ç»“

> æ¾„æ¸…æ€§èƒ½æœ¬è´¨ã€Reactè¿è¡Œæ—¶è€¦åˆã€é€‚ç”¨åœºæ™¯è¾¹ç•Œçš„æœ€ç»ˆç»“è®º

## å¼•è¨€ï¼šä¸€æ¬¡æ·±å…¥å¯¹è¯åçš„æ ¸å¿ƒè®¤çŸ¥

åœ¨æ¢ç´¢ project_manager_fe çš„æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆæ—¶ï¼Œæˆ‘ä»¬ä»"å‘½ä»¤å¼+Zustandèƒ½å¦æé€Ÿ"çš„é—®é¢˜å‡ºå‘ï¼Œé€æ­¥æ·±å…¥åˆ°æ€§èƒ½ä¼˜åŒ–çš„æœ¬è´¨ã€React æ¶æ„çš„è€¦åˆæ€§ã€é€‚ç”¨åœºæ™¯çš„è¾¹ç•Œç­‰æ ¸å¿ƒè®®é¢˜ã€‚

è¿™æ¬¡è®¨è®ºæ¾„æ¸…äº†å‡ ä¸ªå…³é”®è¯¯è§£ï¼š
- âŒ **è¯¯è§£1**ï¼šZustandæ¯”Reactå¿«
- âŒ **è¯¯è§£2**ï¼šæ™®é€šReacté¡¹ç›®ä¹Ÿèƒ½ç”¨å‘½ä»¤å¼+Zustandå¤§å¹…æé€Ÿ
- âŒ **è¯¯è§£3**ï¼šå¹¶è¡Œæ¸²æŸ“ä¸€å®šæ›´å¿«
- âŒ **è¯¯è§£4**ï¼šPreactä¸æ”¯æŒHooks

æœ¬æ–‡é€šè¿‡é—®ç­”å½¢å¼ï¼Œç³»ç»Ÿæ€»ç»“è¿™äº›è®¨è®ºçš„æ ¸å¿ƒè®¤çŸ¥ï¼Œä½œä¸ºå‘½ä»¤å¼æ¸²æŸ“ä¼˜åŒ–ç³»åˆ—çš„æœ€ç»ˆç»“è®ºã€‚

---

## ç¬¬ä¸€ç« ï¼šæ€§èƒ½æœ¬è´¨â€”â€”å¿«çš„ä¸æ˜¯Zustand

### Q1: Zustandæ¯”Reactå¿«å¾ˆå¤šå—ï¼Ÿ

**ç­”ï¼šä¸æ˜¯ï¼å¿«çš„ä¸æ˜¯Zustandï¼Œè€Œæ˜¯"å»æ‰Reactè¿è¡Œæ—¶"ã€‚**

#### æ€§èƒ½å¯¹æ¯”æ•°æ®

**å•å…ƒæ ¼æ¸²æŸ“è€—æ—¶**ï¼š

| æ–¹æ¡ˆ | æ€»è€—æ—¶ | å¼€é”€æ‹†è§£ |
|------|--------|---------|
| **Reactæ–¹æ¡ˆ** | **5.5ms** | JSXç¼–è¯‘(0.3) + createElement(0.5) + Virtual DOM(0.8) + Scheduler(0.3) + Reconciliation(1.2) + Hooks(1.1) + ä¸šåŠ¡é€»è¾‘(0.4) |
| **å‘½ä»¤å¼+Zustand** | **1.8ms** | ZustandçŠ¶æ€æŸ¥è¯¢(0.2) + ä¸šåŠ¡é€»è¾‘(0.4) + CDKåˆ›å»º(0.2) |

**æ€§èƒ½æå‡**ï¼š5.5ms â†’ 1.8msï¼ˆ**3å€**ï¼‰

#### Zustandçš„çœŸå®è§’è‰²

```
Zustandåªæ˜¯ä¸€ä¸ªçŠ¶æ€ç®¡ç†åº“ï¼ˆ3KBï¼‰ï¼š
â”œâ”€ æä¾› store.getState() / store.setState()
â”œâ”€ å‘å¸ƒ-è®¢é˜…æ¨¡å¼ç®¡ç†çŠ¶æ€
â””â”€ æœ¬èº«æ¸²æŸ“è€—æ—¶ï¼šä»… 0.2ms

çœŸæ­£çš„æ€§èƒ½æå‡æ¥è‡ª"å»æ‰Reactè¿è¡Œæ—¶"ï¼š
â”œâ”€ çœæ‰ Virtual DOM åˆ›å»ºï¼š0.8ms
â”œâ”€ çœæ‰ Reconciliationï¼š1.2ms
â”œâ”€ çœæ‰ Scheduler è°ƒåº¦ï¼š0.3ms
â”œâ”€ çœæ‰ React.createElementï¼š0.5ms
â””â”€ çœæ‰ JSX ç¼–è¯‘ï¼š0.3ms
æ€»è®¡çœæ‰ï¼š3.1ms
```

#### å…³é”®æ´å¯Ÿ

> **Zustandä¸æ˜¯æ€§èƒ½åŠ é€Ÿå™¨ï¼Œå®ƒæ˜¯"Reactè¿è¡Œæ—¶çš„è½»é‡æ›¿ä»£å“"**

æ€§èƒ½æå‡çš„çœŸæ­£åŸå› ï¼š
1. âœ… å»æ‰æ•´ä¸ªReactè¿è¡Œæ—¶ï¼ˆçœ3.1msï¼‰
2. âœ… ç”¨è½»é‡çŠ¶æ€ç®¡ç†æ›¿ä»£ï¼ˆZustandåªéœ€0.2msï¼‰
3. âœ… å‘½ä»¤å¼ç›´æ¥åˆ›å»ºCDKå¯¹è±¡ï¼ˆ0.2msï¼‰

Zustandçš„ä»·å€¼åœ¨äºï¼š**è®©ä½ åœ¨å»æ‰Reactåï¼Œä»ç„¶æœ‰ä¸ªæˆç†Ÿçš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ**ï¼ˆè€Œä¸éœ€è¦è‡ªå·±èŠ±6å‘¨å®ç°ï¼‰ã€‚

---

## ç¬¬äºŒç« ï¼šReactè¿è¡Œæ—¶çš„é«˜åº¦è€¦åˆ

### Q2: ä¸ºä»€ä¹ˆç”¨Reactç®¡ç†çŠ¶æ€ä¼šå¼•å…¥"ä¸€å¤§å¨ä¸œè¥¿"ï¼Ÿ

**ç­”ï¼šå› ä¸ºReactæ˜¯é«˜åº¦è€¦åˆçš„æ•´ä½“è®¾è®¡ï¼Œç”¨useStateå¿…ç„¶ç»‘å®šæ•´å¥—è¿è¡Œæ—¶ã€‚**

#### Reactçš„ä¾èµ–é“¾

```
ä½ åªæƒ³ç”¨ useStateï¼š
    â†“
useState å¿…é¡»ä¾èµ– Fiber èŠ‚ç‚¹å­˜å‚¨çŠ¶æ€
    â†“
Fiber æ˜¯ Virtual DOM çš„èŠ‚ç‚¹ç»“æ„ï¼ˆåŒç¼“å†²æ ‘ï¼‰
    â†“
Virtual DOM éœ€è¦ Reconciliation å¯¹æ¯”å·®å¼‚
    â†“
Reconciliation éœ€è¦ Scheduler è°ƒåº¦æ›´æ–°
    â†“
Scheduler éœ€è¦ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆLaneæ¨¡å‹ï¼‰

ç»“æœï¼šç”¨ useState = å¼•å…¥æ•´å¥— React è¿è¡Œæ—¶ï¼ˆ130KBï¼‰
```

#### Reactè¿è¡Œæ—¶åŒ…å«ä»€ä¹ˆï¼Ÿ

```
React 18 è¿è¡Œæ—¶æ¶æ„ï¼š
â”œâ”€ Fiber æ¶æ„ï¼ˆåŒç¼“å†²æ ‘ï¼Œæ¯èŠ‚ç‚¹~500å­—èŠ‚ï¼‰
â”œâ”€ Virtual DOMï¼ˆå†…å­˜ä¸­çš„DOMå‰¯æœ¬ï¼‰
â”œâ”€ Reconciliationï¼ˆDiffç®—æ³•ï¼ŒbeginWork/completeWorkï¼‰
â”œâ”€ Schedulerï¼ˆæ—¶é—´åˆ‡ç‰‡è°ƒåº¦ï¼Œå¯ä¸­æ–­æ¸²æŸ“ï¼‰
â”œâ”€ Hooks ç³»ç»Ÿï¼ˆuseState/useEffect/useContextï¼‰
â””â”€ äº‹ä»¶ç³»ç»Ÿï¼ˆåˆæˆäº‹ä»¶ï¼Œäº‹ä»¶ä»£ç†ï¼‰

Bundle å¤§å°ï¼š130KBï¼ˆgzipåï¼‰
```

#### å¯¹æ¯”ï¼šZustandçš„è½»é‡è®¾è®¡

```
Zustand æ¶æ„ï¼š
â”œâ”€ çŠ¶æ€å­˜å‚¨ï¼šç®€å•çš„ Map
â”œâ”€ è®¢é˜…ç³»ç»Ÿï¼šå‘å¸ƒ-è®¢é˜…æ¨¡å¼
â”œâ”€ APIï¼šstore.getState() / store.setState()
â””â”€ æ²¡æœ‰ä»»ä½•æ¸²æŸ“é€»è¾‘

Bundle å¤§å°ï¼š3KBï¼ˆæ˜¯Reactçš„ 1/43ï¼‰
```

#### ä¸ºä»€ä¹ˆåœ¨project_manager_feä¸­æ˜¯å¤šä½™çš„ï¼Ÿ

**Virtual DOMçš„è®¾è®¡åˆè¡·**ï¼šä¼˜åŒ–DOMæ“ä½œï¼ˆå› ä¸ºDOMå¾ˆæ…¢ï¼‰

```
æ™®é€šReacté¡¹ç›®ï¼š
â”œâ”€ æ¸²æŸ“ç›®æ ‡ï¼šDOM
â”œâ”€ Virtual DOMï¼šå¯¹æ¯”å˜åŒ–ï¼Œåªæ›´æ–°å˜åŒ–çš„DOMèŠ‚ç‚¹
â”œâ”€ Reconciliationï¼šå‡å°‘DOMæ“ä½œæ¬¡æ•°
â””â”€ ç»“è®ºï¼šVirtual DOMæ˜¯å¿…è¦ä¼˜åŒ– âœ…

project_manager_feï¼š
â”œâ”€ æ¸²æŸ“ç›®æ ‡ï¼šCanvasï¼ˆä¸æ˜¯DOMï¼‰
â”œâ”€ Reactä½œç”¨ï¼šåªç”Ÿæˆæ•°æ®æè¿°ï¼ˆCDKå¯¹è±¡ï¼‰
â”œâ”€ Rustå¼•æ“ï¼šè´Ÿè´£Canvasç»˜åˆ¶
â”œâ”€ Virtual DOMï¼šä¼˜åŒ–DOMæ“ä½œï¼Ÿä½†è¿™é‡Œæ ¹æœ¬ä¸æ“ä½œDOMï¼
â””â”€ ç»“è®ºï¼šVirtual DOMæ˜¯pure overhead âŒ
```

**æ ¸å¿ƒæ´å¯Ÿ**ï¼š

> **Reactè¿™"ä¸€å¤§å¨ä¸œè¥¿"åœ¨æ™®é€šé¡¹ç›®é‡Œæ˜¯æœ‰ä»·å€¼çš„ä¼˜åŒ–ï¼Œä½†åœ¨project_manager_feè¿™ç§æœ‰åº•å±‚æ¸²æŸ“å¼•æ“çš„ç‰¹æ®Šæ¶æ„ä¸‹ï¼Œæ˜¯å¤šä½™å¼€é”€ã€‚**

---

## ç¬¬ä¸‰ç« ï¼šé€‚ç”¨åœºæ™¯çš„ä¸¥æ ¼è¾¹ç•Œ

### Q3: æ™®é€šReacté¡¹ç›®èƒ½ç”¨å‘½ä»¤å¼+Zustandå¤§å¹…æé€Ÿå—ï¼Ÿ

**ç­”ï¼šâŒ ä¸èƒ½ï¼åªåœ¨ç‰¹æ®Šæ¶æ„ä¸‹æœ‰æ•ˆã€‚**

#### å¯¹æ¯”è¡¨ï¼šä¸ºä»€ä¹ˆproject_manager_feç‰¹æ®Šï¼Ÿ

| ç»´åº¦ | project_manager_fe | æ™®é€šReacté¡¹ç›® | å·®å¼‚åŸå›  |
|------|-------------------|--------------|---------|
| **æ¸²æŸ“ç›®æ ‡** | Canvasï¼ˆä¸æ˜¯DOMï¼‰ | DOM | Canvasç”±Rustç›´æ¥ç»˜åˆ¶ |
| **åº•å±‚å¼•æ“** | Rust/rdkï¼ˆWASMï¼‰ | æµè§ˆå™¨DOM API | æœ‰ç‹¬ç«‹æ¸²æŸ“å¼•æ“ |
| **Reactä½œç”¨** | ç”Ÿæˆæ•°æ®æè¿°ï¼ˆCDKå¯¹è±¡ï¼‰ | Virtual DOMä¼˜åŒ–DOM | Reactåªè´Ÿè´£ä¸šåŠ¡é€»è¾‘ |
| **Virtual DOM** | å¤šä½™å¼€é”€ âœ… **å¯ä»¥å»æ‰** | å¿…è¦ä¼˜åŒ– âŒ **ä¸èƒ½å»æ‰** | ä¸æ“ä½œDOM vs éœ€è¦DOM |

#### ä¸ºä»€ä¹ˆæ™®é€šé¡¹ç›®ä¸èƒ½å»æ‰Reactï¼Ÿ

**å› ä¸ºæ‰‹åŠ¨DOMæ“ä½œæ¯”Virtual DOMæ›´æ…¢**ï¼š

```
æ€§èƒ½å¯¹æ¯”ï¼ˆæ™®é€šWebåº”ç”¨ï¼‰ï¼š

å‘½ä»¤å¼æ‰‹åŠ¨DOMï¼š
â”œâ”€ document.createElementï¼šæ…¢ï¼ˆDOM APIï¼‰
â”œâ”€ appendChildï¼šæ…¢ï¼ˆè§¦å‘Reflowï¼‰
â”œâ”€ æ¯æ¬¡éƒ½å…¨é‡æ›´æ–°ï¼šææ…¢
â””â”€ è€—æ—¶ï¼š~50ms

React Virtual DOMï¼š
â”œâ”€ Diffç®—æ³•ï¼šå¿«ï¼ˆå†…å­˜æ“ä½œï¼‰
â”œâ”€ åªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†ï¼šä¼˜åŒ–
â”œâ”€ æ‰¹é‡DOMæ“ä½œï¼šä¼˜åŒ–
â””â”€ è€—æ—¶ï¼š~8ms

ç»“è®ºï¼šReactæ›´å¿« âœ…
```

**å¦‚æœå»æ‰React**ï¼š

```
å‘½ä»¤å¼ + Zustandï¼ˆæ™®é€šé¡¹ç›®ï¼‰ï¼š
â”œâ”€ Zustandç®¡ç†çŠ¶æ€ï¼š0.2ms âœ…
â”œâ”€ ä¸šåŠ¡é€»è¾‘ï¼š0.4ms âœ…
â”œâ”€ æ‰‹åŠ¨åˆ›å»ºDOMèŠ‚ç‚¹ï¼š10ms âŒï¼ˆæ…¢ï¼‰
â”œâ”€ æ‰‹åŠ¨appendChildï¼š15ms âŒï¼ˆè§¦å‘Reflowï¼‰
â””â”€ æ€»è€—æ—¶ï¼š25.6msï¼ˆæ¯”Reactçš„8msæ…¢3å€ï¼‰

ç»“è®ºï¼šæ€§èƒ½å˜å·® âŒ
```

#### é€‚ç”¨å‰æï¼ˆç¼ºä¸€ä¸å¯ï¼‰

**å‘½ä»¤å¼+Zustandæ–¹æ¡ˆçš„ä¸‰ä¸ªå¿…è¦æ¡ä»¶**ï¼š

```
1. âœ… æœ‰åº•å±‚æ¸²æŸ“å¼•æ“ï¼ˆRust/Canvas/WebGLï¼‰
   â””â”€ æ›¿ä»£Reactçš„DOMèƒ½åŠ›

2. âœ… Reactåªè´Ÿè´£æ•°æ®ç”Ÿæˆï¼ˆä¸æ“ä½œDOMï¼‰
   â””â”€ Reactçš„æ¸²æŸ“èƒ½åŠ›æœªè¢«ä½¿ç”¨

3. âœ… Virtual DOMç¡®å®æ˜¯å¤šä½™å¼€é”€
   â””â”€ ä¸æ“ä½œDOMï¼Œå¯¹æ¯”å·®å¼‚æ— æ„ä¹‰
```

**ç»“è®º**ï¼š

> **æ™®é€šReacté¡¹ç›®ç¼ºå°‘åº•å±‚æ¸²æŸ“å¼•æ“ï¼Œå»æ‰React = å¤±å»Virtual DOMä¼˜åŒ– = æ€§èƒ½å˜å·®ã€‚**

---

## ç¬¬å››ç« ï¼šå¹¶è¡Œæ¸²æŸ“çš„ç†è®ºä¸ç°å®

### Q4: æ ¼å­èƒ½å¹¶è¡Œæ¸²æŸ“å—ï¼Ÿ

**ç†è®º**ï¼šå¹¶è¡Œæ¸²æŸ“åº”è¯¥æ›´å¿«
**ç°å®**ï¼šJavaScriptå•çº¿ç¨‹é™åˆ¶ï¼Œå‡ ä¹ä¸å¯èƒ½

#### ä¸ºä»€ä¹ˆç°åœ¨æ˜¯ä¸²è¡Œæ¸²æŸ“ï¼Ÿ

**JavaScriptå•çº¿ç¨‹ + WASMä¸»çº¿ç¨‹é€šä¿¡é™åˆ¶**ï¼š

```rust
// Rustè°ƒç”¨JavaScriptæ¸²æŸ“ï¼ˆå¿…é¡»åœ¨ä¸»çº¿ç¨‹ï¼‰
for cell in visible_cells {
    // âš ï¸ è·¨è¯­è¨€è¾¹ç•Œè°ƒç”¨ï¼Œå¿…é¡»ä¸²è¡Œ
    let cdk_element = js_render_cell(cell);  // è°ƒç”¨JavaScript
    self.render_to_canvas(cdk_element);
}

ä¸ºä»€ä¹ˆå¿…é¡»ä¸²è¡Œï¼Ÿ
â”œâ”€ JavaScriptæ˜¯å•çº¿ç¨‹ï¼ˆä¸»çº¿ç¨‹ï¼‰
â”œâ”€ WASMè°ƒç”¨JSå¿…é¡»åœ¨ä¸»çº¿ç¨‹
â”œâ”€ React/ZustandçŠ¶æ€ç®¡ç†åœ¨ä¸»çº¿ç¨‹
â””â”€ æ‰€ä»¥æ— æ³•å¹¶è¡Œ
```

#### ä¸‰ç§å¹¶è¡Œæ–¹æ¡ˆåŠè‡´å‘½é—®é¢˜

##### æ–¹æ¡ˆ1ï¼šWeb Workerå¹¶è¡Œï¼ˆâŒ ä¸å¯è¡Œï¼‰

```typescript
// ç†è®ºä¸Šï¼šæŠŠæ¸²æŸ“å‡½æ•°æ”¾Worker
const worker = new Worker('renderer.js');
worker.postMessage({ cells: visibleCells });

è‡´å‘½é—®é¢˜ï¼š
âŒ æ— æ³•è®¿é—®ä¸»çº¿ç¨‹çš„çŠ¶æ€ï¼ˆZustand/Reactéƒ½åœ¨ä¸»çº¿ç¨‹ï¼‰
âŒ æ— æ³•è®¿é—®DOMï¼ˆWorkeræ— DOMï¼‰
âŒ é€šä¿¡å¼€é”€å¤§ï¼ˆåºåˆ—åŒ–/ååºåˆ—åŒ–ï¼‰
âŒ æœ€ç»ˆè¿˜æ˜¯è¦å›åˆ°ä¸»çº¿ç¨‹æ±‡æ€»ç»“æœ
```

##### æ–¹æ¡ˆ2ï¼šRustå¤šçº¿ç¨‹ï¼ˆâŒ å‡ ä¹ä¸å¯è¡Œï¼‰

```rust
// ç†è®ºä¸Šï¼šRustç”¨rayonå¹¶è¡Œ
use rayon::prelude::*;

visible_cells.par_iter().map(|cell| {
    // âš ï¸ é—®é¢˜ï¼šè¿™é‡Œéœ€è¦è°ƒç”¨JavaScript
    js_render_cell(cell)  // âŒ JSåœ¨ä¸»çº¿ç¨‹ï¼Œæ— æ³•å¹¶è¡Œè°ƒç”¨
}).collect();

è‡´å‘½é—®é¢˜ï¼š
â”œâ”€ WASMçº¿ç¨‹ä¸JSé€šä¿¡çš„é™åˆ¶
â”œâ”€ SharedArrayBufferéœ€è¦ç‰¹æ®Šé…ç½®ï¼ˆCOOP/COEP headersï¼‰
â”œâ”€ çŠ¶æ€ç®¡ç†åœ¨JSä¸»çº¿ç¨‹ï¼ˆæ— æ³•è·¨çº¿ç¨‹è®¿é—®ï¼‰
â””â”€ å¤æ‚åº¦çˆ†ç‚¸
```

##### æ–¹æ¡ˆ3ï¼šçº¯Rustä¸šåŠ¡é€»è¾‘ + Rustå¤šçº¿ç¨‹ï¼ˆâœ… ç†è®ºå¯è¡Œï¼Œä½†æˆæœ¬å·¨å¤§ï¼‰

```rust
// æŠŠä¸šåŠ¡é€»è¾‘å…¨éƒ¨ç”¨Rustå®ç°
visible_cells.par_iter().map(|cell| {
    // âœ… å…¨åœ¨Rustä¾§ï¼Œå¯ä»¥å¹¶è¡Œ
    let cell_state = self.state_manager.get(cell.id);
    let cdk = render_name_cell_rust(cell.data, cell_state);
    cdk
}).collect();

// ç„¶åä¸²è¡Œç»˜åˆ¶ï¼ˆCanvas APIå¿…é¡»ä¸»çº¿ç¨‹ï¼‰
for cdk in cdk_elements {
    self.canvas.draw(cdk);
}

é—®é¢˜ï¼š
â”œâ”€ éœ€è¦ç”¨Rusté‡å†™æ‰€æœ‰ä¸šåŠ¡é€»è¾‘ï¼ˆ3,068è¡Œ â†’ 12,000è¡Œï¼‰
â”œâ”€ å¼€å‘æˆæœ¬ï¼š10ä¸ªæœˆ
â”œâ”€ å®é™…æ”¶ç›Šï¼šå¹¶è¡Œæ¸²æŸ“100ä¸ªå•å…ƒæ ¼ï¼ˆ1.8ms â†’ 0.9msï¼Ÿï¼‰
â””â”€ æŠ•å…¥äº§å‡ºæ¯”æä½
```

#### ä¸ºä»€ä¹ˆå¹¶è¡Œæ¸²æŸ“æ”¶ç›Šä¸å¤§ï¼Ÿ

**ç“¶é¢ˆä¸åœ¨è®¡ç®—ï¼Œè€Œåœ¨è·¨è¯­è¨€é€šä¿¡å’ŒCanvasç»˜åˆ¶**ï¼š

```
å½“å‰è€—æ—¶åˆ†è§£ï¼ˆ100ä¸ªå•å…ƒæ ¼ï¼Œæœªç¼“å­˜ï¼‰ï¼š
â”œâ”€ æ¸²æŸ“è®¡ç®—ï¼š1.8ms Ã— 100 = 180ms
â”œâ”€ Rust Canvasç»˜åˆ¶ï¼š13msï¼ˆä¸²è¡Œï¼Œå¿…é¡»ä¸»çº¿ç¨‹ï¼‰
â”œâ”€ è·¨è¯­è¨€é€šä¿¡ï¼š0.2ms Ã— 100 = 20ms
â””â”€ æ€»è€—æ—¶ï¼š180ms + 13ms + 20ms = 213ms

å¦‚æœå¹¶è¡Œæ¸²æŸ“ï¼ˆç†æƒ³æƒ…å†µï¼‰ï¼š
â”œâ”€ å¹¶è¡Œæ¸²æŸ“è®¡ç®—ï¼š1.8msï¼ˆå¹¶è¡Œï¼‰
â”œâ”€ Rust Canvasç»˜åˆ¶ï¼š13msï¼ˆä»ä¸²è¡Œï¼‰
â”œâ”€ è·¨è¯­è¨€é€šä¿¡ï¼š20msï¼ˆä»ä¸²è¡Œï¼‰
â””â”€ æ€»è€—æ—¶ï¼š1.8ms + 13ms + 20ms = 35ms

ç†è®ºæå‡ï¼š213ms â†’ 35msï¼ˆ6å€ï¼‰

ä½†ç°å®ï¼š
â”œâ”€ ç¼“å­˜å‘½ä¸­ç‡95%æ—¶ï¼š10msï¼ˆå·²ç»å¤Ÿå¿«ï¼‰
â”œâ”€ å¹¶è¡Œæ¸²æŸ“çš„å¤æ‚åº¦ï¼šæ¶æ„æ”¹é€  + 10ä¸ªæœˆå¼€å‘
â””â”€ ä¸å€¼å¾—
```

#### çœŸæ­£çš„ä¼˜åŒ–æ–¹å‘

**ä¸æ˜¯å¹¶è¡Œï¼Œè€Œæ˜¯å‡å°‘éœ€è¦æ¸²æŸ“çš„å•å…ƒæ ¼æ•°é‡**ï¼š

```
å½“å‰ä¼˜åŒ–ï¼ˆå·²å®ç°ï¼‰ï¼š
â”œâ”€ LRUç¼“å­˜ï¼š95%å‘½ä¸­ç‡ â†’ åªæ¸²æŸ“5ä¸ªæ–°å•å…ƒæ ¼
â”œâ”€ è™šæ‹Ÿæ»šåŠ¨ï¼šåªæ¸²æŸ“å¯è§åŒºåŸŸï¼ˆ100ä¸ªï¼‰
â””â”€ è„åŒºåŸŸä¼˜åŒ–ï¼šåªé‡ç»˜å˜åŒ–çš„åŒºåŸŸ

ç»“æœï¼š
â””â”€ ç¨³å®šæ»šåŠ¨10msï¼ˆ60fpsç¨³å®šï¼‰

è¿›ä¸€æ­¥ä¼˜åŒ–ï¼ˆè¾¹é™…æ”¶ç›Šé€’å‡ï¼‰ï¼š
â”œâ”€ é¢„åŠ è½½ï¼šæå‰æ¸²æŸ“ä¸‹æ–¹å³å°†å¯è§çš„å•å…ƒæ ¼
â”œâ”€ ç¼“å­˜é¢„çƒ­ï¼šé¦–æ¬¡åŠ è½½æ—¶æ‰¹é‡é¢„æ¸²æŸ“
â”œâ”€ å¢é‡æ›´æ–°ï¼šçŠ¶æ€å˜åŒ–æ—¶åªæ›´æ–°å˜åŒ–çš„å•å…ƒæ ¼
â””â”€ æ”¶ç›Šï¼š10ms â†’ 7msï¼ˆç”¨æˆ·æ„ŸçŸ¥ä¸æ˜æ˜¾ï¼‰
```

**æ ¸å¿ƒç»“è®º**ï¼š

> **çœŸæ­£å¿«çš„æ–¹æ³•ä¸æ˜¯"å¹¶è¡Œæ¸²æŸ“100ä¸ª"ï¼Œè€Œæ˜¯"åªæ¸²æŸ“5ä¸ª"ï¼ˆç¼“å­˜ï¼‰ã€‚**

---

## ç¬¬äº”ç« ï¼šPreactçš„çœŸç›¸ä¸æƒè¡¡

### Q5: Preactä¸ºä»€ä¹ˆå¿«ï¼Ÿä¸æ”¯æŒHooksï¼Ÿç¼ºé™·åœ¨å“ªï¼Ÿ

#### æ¾„æ¸…è¯¯è§£

**âŒ è¯¯è§£**ï¼šPreactä¸æ”¯æŒHooks
**âœ… çœŸç›¸**ï¼šPreact 10+ å®Œå…¨æ”¯æŒHooks

```typescript
// âœ… Preactæ”¯æŒæ‰€æœ‰å¸¸ç”¨Hooks
import { h } from 'preact';
import { useState, useEffect, useContext, useMemo, useCallback, useRef } from 'preact/hooks';

const Component = () => {
  const [state, setState] = useState(0);  // âœ…
  const context = useContext(MyContext);   // âœ…

  useEffect(() => {
    // âœ… å®Œå…¨å…¼å®¹React API
  }, [state]);

  return h('div', null, state);
};
```

**APIå…¼å®¹æ€§**ï¼š95%å…¼å®¹Reactï¼ˆåŸºç¡€Hooks 100%å…¼å®¹ï¼‰

#### ä¸ºä»€ä¹ˆå¿«ï¼Ÿ

**ç”¨"ç¼ºå¤±å¤æ‚ç‰¹æ€§"æ¢å–"æ€§èƒ½"**ï¼š

```
React 18æ¶æ„ï¼ˆå¤æ‚ï¼‰ï¼š
â”œâ”€ FiberåŒç¼“å†²æ¶æ„ï¼ˆæ¯èŠ‚ç‚¹~500å­—èŠ‚ï¼‰
â”œâ”€ Scheduleræ—¶é—´åˆ‡ç‰‡ï¼ˆå¯ä¸­æ–­æ¸²æŸ“ï¼‰
â”œâ”€ Laneä¼˜å…ˆçº§æ¨¡å‹ï¼ˆå¤æ‚è°ƒåº¦ï¼‰
â”œâ”€ å®Œæ•´Reconciliationï¼ˆbeginWork/completeWorkï¼‰
â””â”€ Bundleï¼š130KB

Preact 10æ¶æ„ï¼ˆç®€åŒ–ï¼‰ï¼š
â”œâ”€ âŒ æ— Fiberï¼ˆVNodeåª~150å­—èŠ‚ï¼‰
â”œâ”€ âŒ æ— Schedulerï¼ˆåŒæ­¥æ¸²æŸ“ï¼‰
â”œâ”€ âŒ æ— ä¼˜å…ˆçº§è°ƒåº¦
â”œâ”€ âœ… ç®€åŒ–Diffï¼ˆç›´æ¥å¯¹æ¯”ï¼Œç«‹å³æ›´æ–°ï¼‰
â””â”€ Bundleï¼š4KB

æ€§èƒ½å¯¹æ¯”ï¼š
å•å…ƒæ ¼æ¸²æŸ“ï¼š5.5ms â†’ 2.3msï¼ˆå¿«2.4å€ï¼‰
å†…å­˜å ç”¨ï¼šå‡å°‘70%
```

#### Hookså®ç°å¯¹æ¯”

```javascript
// React Hooksï¼ˆåŸºäºFiberï¼‰
function useState(initialState) {
  const fiber = currentlyRenderingFiber;
  const hook = fiber.memoizedState;  // â† å­˜åœ¨Fiberä¸Š
  // ...å¤æ‚çš„è°ƒåº¦é€»è¾‘
}

// Preact Hooksï¼ˆç‹¬ç«‹å­˜å‚¨ï¼‰
function useState(initialState) {
  const component = currentComponent;
  const hook = component.__hooks[hookIndex];  // â† å­˜åœ¨æ•°ç»„ä¸Š
  // ...ç®€åŒ–çš„æ›´æ–°é€»è¾‘
}

ç»“è®ºï¼šAPI 100%å…¼å®¹ï¼Œå®ç°æ›´ç®€å•
```

#### çœŸå®ç¼ºé™·

##### âŒ ç¼ºé™·1ï¼šä¸æ”¯æŒReact 18æ–°ç‰¹æ€§

```typescript
// âŒ Concurrent Modeä¸æ”¯æŒ
import { createRoot } from 'react-dom/client';
const root = createRoot(container);  // Preactä¸æ”¯æŒ

// âŒ useTransitionä¸æ”¯æŒ
const [isPending, startTransition] = useTransition();  // ä¸æ”¯æŒ

// âŒ useDeferredValueä¸æ”¯æŒ
const deferredValue = useDeferredValue(value);  // ä¸æ”¯æŒ

// âŒ Suspenseï¼ˆéƒ¨åˆ†æ”¯æŒï¼Œä¸å®Œæ•´ï¼‰
<Suspense fallback={<Loading />}>  // åŸºç¡€èƒ½åŠ›æ”¯æŒï¼Œä½†ä¸å¦‚React
  <LazyComponent />
</Suspense>

// âœ… åŸºç¡€Hookså®Œå…¨æ”¯æŒ
useState, useEffect, useContext, useMemo, useCallback, useRef
```

##### âŒ ç¼ºé™·2ï¼šç¬¬ä¸‰æ–¹åº“å…¼å®¹æ€§é—®é¢˜

```typescript
// âš ï¸ å¯èƒ½ä¸å…¼å®¹çš„åº“
import { Button } from 'antd';  // å¯èƒ½æœ‰é—®é¢˜ï¼ˆä¾èµ–Reactå†…éƒ¨APIï¼‰
import { DatePicker } from '@mui/material';  // å¯èƒ½æœ‰é—®é¢˜

// âœ… é€šå¸¸å…¼å®¹çš„åº“
import create from 'zustand';  // âœ… å…¼å®¹
import { BrowserRouter } from 'react-router-dom';  // âœ… åŸºæœ¬å…¼å®¹

éœ€è¦æµ‹è¯•ï¼š
â””â”€ é¡¹ç›®é‡Œç”¨çš„æ¯ä¸ªç¬¬ä¸‰æ–¹Reactåº“
```

##### âŒ ç¼ºé™·3ï¼šDevToolsæ”¯æŒä¸å®Œæ•´

```
React DevTools:
â”œâ”€ âœ… ç»„ä»¶æ ‘å®Œæ•´å±•ç¤º
â”œâ”€ âœ… Props/Stateå®æ—¶æŸ¥çœ‹
â”œâ”€ âœ… Profileræ€§èƒ½åˆ†æ
â””â”€ âœ… æ—¶é—´æ—…è¡Œè°ƒè¯•

Preact DevTools:
â”œâ”€ âœ… åŸºæœ¬ç»„ä»¶æ ‘
â”œâ”€ âœ… Props/StateæŸ¥çœ‹
â”œâ”€ âš ï¸ ProfileråŠŸèƒ½å¼±
â””â”€ âŒ æ²¡æœ‰æ—¶é—´æ—…è¡Œ
```

##### âŒ ç¼ºé™·4ï¼šç¤¾åŒºç”Ÿæ€å·®è·

```
Reactç”Ÿæ€ï¼š
â”œâ”€ GitHub Stars: 220k+
â”œâ”€ npmå‘¨ä¸‹è½½: 20M+
â”œâ”€ ç¬¬ä¸‰æ–¹åº“: æ•°ä¸‡ä¸ª
â””â”€ ä¼ä¸šæ”¯æŒ: Meta

Preactç”Ÿæ€ï¼š
â”œâ”€ GitHub Stars: 36k
â”œâ”€ npmå‘¨ä¸‹è½½: 1M
â”œâ”€ ç¬¬ä¸‰æ–¹åº“: æ•°ç™¾ä¸ª
â””â”€ ä¼ä¸šæ”¯æŒ: æœ‰é™ï¼ˆUberã€Lyftåœ¨ç”¨ï¼‰
```

#### è®¾è®¡å“²å­¦å¯¹æ¯”

```
Reactè®¾è®¡å“²å­¦ï¼š
â”œâ”€ Concurrent Mode â†’ å¤æ‚çš„Scheduler
â”œâ”€ ä¼˜å…ˆçº§è°ƒåº¦ â†’ å¤æ‚çš„Laneæ¨¡å‹
â”œâ”€ å¯ä¸­æ–­æ¸²æŸ“ â†’ FiberåŒç¼“å†²
â””â”€ ç›®æ ‡ï¼šæè‡´çš„ç”¨æˆ·ä½“éªŒï¼ˆå¤§å‹åº”ç”¨ï¼‰

Preactè®¾è®¡å“²å­¦ï¼š
â”œâ”€ åŒæ­¥æ¸²æŸ“ â†’ æ— Schedulerï¼ˆç®€å•ï¼‰
â”œâ”€ æ— ä¼˜å…ˆçº§ â†’ ç›´æ¥æ›´æ–°ï¼ˆå¿«ï¼‰
â”œâ”€ ç®€åŒ–æ¶æ„ â†’ VNodeï¼ˆè½»é‡ï¼‰
â””â”€ ç›®æ ‡ï¼šå°å‹åº”ç”¨çš„æè‡´æ€§èƒ½

ç»“è®ºï¼š
â””â”€ Preactæ”¾å¼ƒäº†"å¤æ‚åœºæ™¯çš„ä¼˜é›…å¤„ç†"
   æ¢å–äº†"ç®€å•åœºæ™¯çš„æè‡´æ€§èƒ½"
```

#### é€‚ç”¨åœºæ™¯

```
âœ… æ¨èä½¿ç”¨Preactï¼š
â”œâ”€ å°å‹åº”ç”¨ï¼ˆ< 100ä¸ªç»„ä»¶ï¼‰
â”œâ”€ æ€§èƒ½æ•æ„Ÿåœºæ™¯ï¼ˆç§»åŠ¨ç«¯ã€ä½ç«¯è®¾å¤‡ï¼‰
â”œâ”€ ä¸ä¾èµ–React 18æ–°ç‰¹æ€§
â””â”€ ç¬¬ä¸‰æ–¹åº“å°‘ï¼ˆä¸»è¦æ˜¯è‡ªå·±çš„ä»£ç ï¼‰

âŒ ä¸æ¨èä½¿ç”¨Preactï¼š
â”œâ”€ å¤§å‹ä¼ä¸šåº”ç”¨ï¼ˆç”Ÿæ€é£é™©ï¼‰
â”œâ”€ éœ€è¦Concurrent Mode
â”œâ”€ æ·±åº¦ä¾èµ–ç¬¬ä¸‰æ–¹Reactåº“
â””â”€ å›¢é˜Ÿå¯¹Reactç”Ÿæ€ä¾èµ–å¼º
```

**åœ¨project_manager_feä¸­**ï¼š

```
âœ… é€‚åˆä½¿ç”¨Preactï¼š
â”œâ”€ ä¸éœ€è¦Concurrent Modeï¼ˆè¡¨æ ¼æ¸²æŸ“ï¼‰
â”œâ”€ ç¬¬ä¸‰æ–¹åº“å°‘ï¼ˆä¸»è¦æ˜¯è‡ªå·±çš„ä»£ç ï¼‰
â”œâ”€ æ€§èƒ½æ˜¯æ ¸å¿ƒè¯‰æ±‚
â””â”€ è¿ç§»æˆæœ¬ä½ï¼ˆ1å¤©ï¼Œæ”¹Webpack aliasï¼‰
```

---

## ç¬¬å…­ç« ï¼šæŠ€æœ¯é€‰æ‹©çš„å†³ç­–çŸ©é˜µ

### é’ˆå¯¹project_manager_feï¼ˆæœ‰Rustå¼•æ“ï¼‰

```
åœºæ™¯ï¼šæœ‰Rustå¼•æ“ + Canvasæ¸²æŸ“

æ¨èæ–¹æ¡ˆä¼˜å…ˆçº§ï¼š

1ï¸âƒ£ Reactè‡ªèº«ä¼˜åŒ– â­â­â­â­â­
   â”œâ”€ æ–¹æ¡ˆï¼šuseMemo + ç¼“å­˜æ‰©å¤§ + Web Worker
   â”œâ”€ æŠ•å…¥ï¼š1-2å‘¨
   â”œâ”€ æ”¶ç›Šï¼š1.6å€æå‡ï¼ˆ550ms â†’ 350msï¼‰
   â”œâ”€ é£é™©ï¼šæä½ï¼ˆæ— æ¶æ„å˜æ›´ï¼‰
   â””â”€ æ¨èç†ç”±ï¼šæœ€ç°å®ã€æœ€ç¨³å¦¥

2ï¸âƒ£ Preactæ›¿æ¢ â­â­â­â­â­
   â”œâ”€ æ–¹æ¡ˆï¼šæ”¹Webpack alias
   â”œâ”€ æŠ•å…¥ï¼š1å¤©
   â”œâ”€ æ”¶ç›Šï¼š2.4å€æå‡ï¼ˆ5.5ms â†’ 2.3msï¼‰
   â”œâ”€ é£é™©ï¼šä½ï¼ˆæˆç†Ÿæ–¹æ¡ˆï¼Œå¯å›æ»šï¼‰
   â””â”€ æ¨èç†ç”±ï¼šæœ€å¿«ã€æ”¶ç›Šæœ€é«˜

3ï¸âƒ£ Zustand+å‘½ä»¤å¼ â­â­â­â­
   â”œâ”€ æ–¹æ¡ˆï¼šå‘½ä»¤å¼æ”¹é€  + Zustand
   â”œâ”€ æŠ•å…¥ï¼š2-3å‘¨
   â”œâ”€ æ”¶ç›Šï¼š3å€æå‡ï¼ˆ5.5ms â†’ 1.8msï¼‰
   â”œâ”€ é£é™©ï¼šä¸­ï¼ˆéœ€è¦æ”¹é€ ä¸šåŠ¡ä»£ç ï¼‰
   â””â”€ æ¨èç†ç”±ï¼šæè‡´æ€§èƒ½ï¼Œæ— Reactä¾èµ–

ä¸æ¨èï¼š
âŒ è‡ªå»ºçŠ¶æ€ç®¡ç†ï¼ˆ6å‘¨å¼€å‘ï¼Œé«˜ç»´æŠ¤æˆæœ¬ï¼‰
âŒ çº¯Rustï¼ˆ10ä¸ªæœˆï¼Œæé«˜æˆæœ¬ï¼‰
```

### é’ˆå¯¹æ™®é€šReacté¡¹ç›®ï¼ˆæ— åº•å±‚å¼•æ“ï¼‰

```
åœºæ™¯ï¼šéœ€è¦DOMæ¸²æŸ“

æ¨èæ–¹æ¡ˆï¼š

1ï¸âƒ£ Reactè‡ªèº«ä¼˜åŒ– â­â­â­â­â­
   â”œâ”€ useMemo/useCallback
   â”œâ”€ React.memo
   â”œâ”€ è™šæ‹Ÿåˆ—è¡¨ï¼ˆreact-windowï¼‰
   â””â”€ æ¨èç†ç”±ï¼šæœ€ç¨³å¦¥

2ï¸âƒ£ Preactï¼ˆæ•´ä¸ªé¡¹ç›®å¯æ¢ï¼‰ â­â­â­â­
   â”œâ”€ å…¨å±€æ›¿æ¢React
   â”œâ”€ Bundleå‡å°‘97%ï¼ˆ130KB â†’ 4KBï¼‰
   â”œâ”€ æ€§èƒ½æå‡2.4å€
   â””â”€ æ¨èç†ç”±ï¼šç®€å•é«˜æ•ˆ

3ï¸âƒ£ DOM+Windowingï¼ˆæ•°æ®é‡<5000ï¼‰ â­â­â­â­
   â”œâ”€ æ”¾å¼ƒRust/Canvas
   â”œâ”€ çº¯React + react-window
   â””â”€ æ¨èç†ç”±ï¼šæ¶æ„æœ€ç®€å•

ä¸é€‚ç”¨ï¼š
âŒ å‘½ä»¤å¼+Zustandï¼ˆæ²¡æœ‰åº•å±‚å¼•æ“ï¼Œæ‰‹åŠ¨DOMæ›´æ…¢ï¼‰
âŒ çº¯Rustï¼ˆæ²¡æœ‰åº•å±‚å¼•æ“åŸºç¡€ï¼‰
```

---

## æ€»ç»“

### ğŸ¯ æ ¸å¿ƒè®¤çŸ¥

#### 1. æ€§èƒ½æœ¬è´¨

```
å¿«çš„ä¸æ˜¯åº“ï¼ˆZustand/Preactï¼‰
è€Œæ˜¯æ¶æ„ï¼ˆå»æ‰Reactè¿è¡Œæ—¶ï¼‰

Reactè¿è¡Œæ—¶å¼€é”€ï¼š
â”œâ”€ Virtual DOMï¼š0.8ms
â”œâ”€ Reconciliationï¼š1.2ms
â”œâ”€ Schedulerï¼š0.3ms
â”œâ”€ createElementï¼š0.5ms
â””â”€ JSXç¼–è¯‘ï¼š0.3ms
æ€»è®¡ï¼š3.1ms

å»æ‰è¿™äº› = æ€§èƒ½æå‡3å€
```

#### 2. é€‚ç”¨è¾¹ç•Œ

```
ç‰¹æ®Šæ¶æ„ï¼šæœ‰åº•å±‚å¼•æ“ â†’ å¯ä»¥å»æ‰React
â”œâ”€ Rust/rdk + Canvas âœ…
â”œâ”€ WebGLå¼•æ“ âœ…
â””â”€ è‡ªå»ºæ¸²æŸ“å™¨ âœ…

æ™®é€šé¡¹ç›®ï¼šéœ€è¦DOM â†’ Reactå·²æ˜¯æœ€ä¼˜
â”œâ”€ Virtual DOMä¼˜åŒ–DOMæ“ä½œ
â”œâ”€ å»æ‰React = æ‰‹åŠ¨DOMï¼ˆæ›´æ…¢ï¼‰
â””â”€ ä¸è¦ç›²ç›®å»ReactåŒ– âŒ
```

#### 3. Reactè¿è¡Œæ—¶çš„è€¦åˆ

```
ç”¨useStateå¿…ç„¶ç»‘å®šï¼š
â”œâ”€ Fiberï¼ˆå­˜å‚¨ï¼‰
â”œâ”€ Virtual DOMï¼ˆç»“æ„ï¼‰
â”œâ”€ Reconciliationï¼ˆå¯¹æ¯”ï¼‰
â”œâ”€ Schedulerï¼ˆè°ƒåº¦ï¼‰
â””â”€ ç»“æœï¼š130KBè¿è¡Œæ—¶

åœ¨project_manager_feä¸­ï¼š
â”œâ”€ Virtual DOMä¼˜åŒ–DOM
â”œâ”€ ä½†è¿™é‡Œä¸æ“ä½œDOM
â””â”€ æ‰€ä»¥æ˜¯pure overhead
```

#### 4. æŠ€æœ¯é€‰æ‹©

```
æœ‰åº•å±‚å¼•æ“ï¼ˆproject_manager_feï¼‰ï¼š
â”œâ”€ ç¬¬ä¸€é€‰æ‹©ï¼šPreactï¼ˆæœ€å¿«ï¼Œ1å¤©ï¼‰
â”œâ”€ ç¬¬äºŒé€‰æ‹©ï¼šZustandï¼ˆè½»é‡ï¼Œ2-3å‘¨ï¼‰
â”œâ”€ ç¬¬ä¸‰é€‰æ‹©ï¼šReactä¼˜åŒ–ï¼ˆç¨³å¦¥ï¼Œ1-2å‘¨ï¼‰
â””â”€ ä¸æ¨èï¼šè‡ªå»º/çº¯Rustï¼ˆæˆæœ¬è¿‡é«˜ï¼‰

æ™®é€šé¡¹ç›®ï¼š
â”œâ”€ ç¬¬ä¸€é€‰æ‹©ï¼šReactä¼˜åŒ–
â”œâ”€ ç¬¬äºŒé€‰æ‹©ï¼šPreactï¼ˆæ•´ä½“ï¼‰
â”œâ”€ ç¬¬ä¸‰é€‰æ‹©ï¼šDOM+Windowing
â””â”€ ä¸è¦ï¼šå»æ‰Reactï¼ˆæ›´æ…¢ï¼‰
```

#### 5. å¹¶è¡Œæ¸²æŸ“

```
ç†è®ºï¼šå¹¶è¡Œåº”è¯¥æ›´å¿«
ç°å®ï¼šJavaScriptå•çº¿ç¨‹é™åˆ¶

çœŸæ­£çš„ä¼˜åŒ–ï¼š
â””â”€ ä¸æ˜¯"å¹¶è¡Œæ¸²æŸ“100ä¸ª"
   è€Œæ˜¯"åªæ¸²æŸ“5ä¸ª"ï¼ˆç¼“å­˜ï¼‰
```

#### 6. PreactçœŸç›¸

```
âœ… å®Œå…¨æ”¯æŒHooks
âœ… å¿«2.4å€ï¼ˆå»æ‰Fiber/Schedulerï¼‰
âœ… Bundleå°97%ï¼ˆ4KB vs 130KBï¼‰

âŒ ä¸æ”¯æŒReact 18æ–°ç‰¹æ€§
âŒ ç¬¬ä¸‰æ–¹åº“å¯èƒ½ä¸å…¼å®¹
âŒ DevToolsåŠŸèƒ½å¼±
âŒ ç¤¾åŒºå°
```

### ğŸ’¡ ä¸€å¥è¯æ€»ç»“

> **å‘½ä»¤å¼+Zustandæ–¹æ¡ˆçš„æ€§èƒ½æå‡æºäº"å»æ‰Reactè¿è¡Œæ—¶å¼€é”€"ï¼Œåªåœ¨æœ‰åº•å±‚æ¸²æŸ“å¼•æ“ï¼ˆRust/Canvas/WebGLï¼‰æ—¶æœ‰æ•ˆã€‚æ™®é€šDOMæ¸²æŸ“é¡¹ç›®ä¸­ï¼ŒReactçš„Virtual DOMæ˜¯å¿…è¦ä¼˜åŒ–è€Œéç´¯èµ˜ï¼Œä¸åº”å»é™¤ã€‚æŠ€æœ¯é€‰æ‹©åº”åŸºäºæ¶æ„ç‰¹æ€§ï¼Œè€Œéç›²ç›®è¿½æ±‚"å‘½ä»¤å¼"æˆ–"å»ReactåŒ–"ã€‚** ğŸš€

### ğŸ”‘ æœ€ç»ˆå»ºè®®

**å¯¹äºproject_manager_fe**ï¼š

1. **ç«‹å³å°è¯•**ï¼šPreactæ›¿æ¢ï¼ˆ1å¤©ï¼Œ2.4å€æå‡ï¼Œä½é£é™©ï¼‰
2. **å¦‚æœä¸è¡Œ**ï¼šReactè‡ªèº«ä¼˜åŒ–ï¼ˆ1-2å‘¨ï¼Œ1.6å€æå‡ï¼Œé›¶é£é™©ï¼‰
3. **æè‡´æ€§èƒ½**ï¼šZustand+å‘½ä»¤å¼ï¼ˆ2-3å‘¨ï¼Œ3å€æå‡ï¼Œä¸­é£é™©ï¼‰

**å¯¹äºæ™®é€šReacté¡¹ç›®**ï¼š

1. **é¦–é€‰**ï¼šReactè‡ªèº«ä¼˜åŒ–ï¼ˆuseMemo + è™šæ‹Ÿåˆ—è¡¨ï¼‰
2. **å¯é€‰**ï¼šPreactæ•´ä½“æ›¿æ¢ï¼ˆå¦‚æœæ•´ä¸ªé¡¹ç›®å¯æ¢ï¼‰
3. **ç¦æ­¢**ï¼šå‘½ä»¤å¼+Zustandï¼ˆæ²¡æœ‰åº•å±‚å¼•æ“ï¼Œä¼šæ›´æ…¢ï¼‰

---

> å†™ä½œæ—¥æœŸï¼š2024å¹´2æœˆ
> å­—æ•°ç»Ÿè®¡ï¼šçº¦6000å­—
> æŠ€æœ¯æ·±åº¦ï¼šâ­â­â­â­ï¼ˆé«˜çº§ï¼‰
> é€‚åˆè¯»è€…ï¼šç†è§£æ··åˆæ¶æ„æ€§èƒ½ä¼˜åŒ–æœ¬è´¨çš„å‰ç«¯å·¥ç¨‹å¸ˆ

[PROTOCOL]: å˜æ›´æ—¶æ›´æ–°æ­¤å¤´éƒ¨ï¼Œç„¶åæ£€æŸ¥ CLAUDE.md
