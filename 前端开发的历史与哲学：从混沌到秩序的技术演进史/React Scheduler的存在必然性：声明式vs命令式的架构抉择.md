<!--
- [INPUT]: ä¾èµ– project_manager_fe ä»£ç åº“çš„çœŸå®ä¸šåŠ¡å¤æ‚åº¦ï¼Œä»¥åŠã€ŠReact+Rustæ··åˆæ¶æ„æ·±åº¦å‰–æã€‹çš„æ¶æ„åˆ†æ
- [OUTPUT]: æ·±åº¦è§£æä¸ºä»€ä¹ˆ project_manager_fe ä¿ç•™ React Schedulerï¼Œå¯¹æ¯”å£°æ˜å¼ã€å‘½ä»¤å¼ã€çº¯Rustä¸‰ç§æ–¹æ¡ˆçš„æˆæœ¬æ”¶ç›Š
- [POS]: å‰ç«¯å¼€å‘çš„å†å²ä¸å“²å­¦ç›®å½•ä¸‹çš„æ¶æ„å†³ç­–åˆ†ææ–‡æ¡£
- [PROTOCOL]: å˜æ›´æ—¶æ›´æ–°æ­¤å¤´éƒ¨ï¼Œç„¶åæ£€æŸ¥ CLAUDE.md
-->

# React Scheduler çš„å­˜åœ¨å¿…ç„¶æ€§ï¼šå£°æ˜å¼ vs å‘½ä»¤å¼çš„æ¶æ„æŠ‰æ‹©

> åŸºäº project_manager_fe çœŸå®ä»£ç çš„æ·±åº¦åˆ†æâ€”â€”ä¸ºä»€ä¹ˆä¿ç•™ React Scheduler ä¸æ˜¯å¦¥åï¼Œè€Œæ˜¯ç†æ€§é€‰æ‹©

## å¼•è¨€ï¼šä¸€ä¸ªè¢«è´¨ç–‘çš„æ¶æ„å†³ç­–

åœ¨ project_manager_fe çš„æ··åˆæ¶æ„ä¸­ï¼ŒReact Scheduler ä»ç„¶å‚ä¸å•å…ƒæ ¼å†…å®¹çš„ç”Ÿæˆï¼Œè¿™å¼•å‘äº†ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š

**æ—¢ç„¶ Rust å·²ç»è´Ÿè´£è™šæ‹Ÿæ»šåŠ¨å’Œ Canvas ç»˜åˆ¶ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦ React Scheduler å‚ä¸æ¸²æŸ“ï¼Ÿèƒ½ä¸èƒ½å®Œå…¨å»æ‰å®ƒï¼Ÿ**

è¿™ä¸ªé—®é¢˜çš„èƒŒåï¼Œéšè—ç€ä¸‰ç§å¯èƒ½çš„æ¶æ„æ–¹æ¡ˆï¼š

- **æ–¹æ¡ˆ A**ï¼šReact + å£°æ˜å¼ï¼ˆJSXï¼‰â€”â€” å½“å‰å®ç°
- **æ–¹æ¡ˆ B**ï¼šReact + å‘½ä»¤å¼ï¼ˆè·³è¿‡ JSX/Virtual DOMï¼‰â€”â€” ä¸­é—´æ–¹æ¡ˆ
- **æ–¹æ¡ˆ C**ï¼šçº¯ Rust å‘½ä»¤å¼ â€”â€” æè‡´æ€§èƒ½æ–¹æ¡ˆ

æœ¬æ–‡å°†åŸºäº **3,068 è¡ŒçœŸå®ä¸šåŠ¡ä»£ç **ï¼Œæ·±åº¦åˆ†æè¿™ä¸‰ç§æ–¹æ¡ˆçš„æˆæœ¬ã€æ”¶ç›Šã€å¤æ‚åº¦ã€å¯ç»´æŠ¤æ€§ï¼Œæ­ç¤º project_manager_fe ä¸ºä»€ä¹ˆé€‰æ‹©æ–¹æ¡ˆ Aï¼Œä»¥åŠæ–¹æ¡ˆ B æ˜¯å¦å€¼å¾—è¿ç§»ã€‚

---

## ç¬¬ä¸€ç« ï¼šä¸šåŠ¡å¤æ‚åº¦çš„çœŸç›¸â€”â€”ä¸ºä»€ä¹ˆéœ€è¦çŠ¶æ€ç®¡ç†ï¼Ÿ

### 1.1 çœŸå®ä»£ç çš„å¤æ‚åº¦

**ä»£ç è·¯å¾„**ï¼š`plugins/fieldPlugins/name/table/display.tsx`

```bash
# ç»Ÿè®¡æ•°æ®
æ‰€æœ‰å­—æ®µæ¸²æŸ“å™¨æ€»ä»£ç é‡ï¼š3,068 è¡Œ
name å­—æ®µå•ä¸ªæ¸²æŸ“å™¨ï¼š200+ è¡Œ
æœ€å¤æ‚çš„æ¸²æŸ“å™¨ï¼ˆworkItemStatusï¼‰ï¼š247 è¡Œ
å­—æ®µç±»å‹æ•°é‡ï¼š20+ï¼ˆname, status, user, date, select...ï¼‰
```

**ä¸€ä¸ª"ç®€å•"çš„ name å­—æ®µæ¸²æŸ“å™¨å®é™…åŒ…å«**ï¼š

```typescript
const RawNameInTableCanvas: React.FC = (props) => {
  // ====== 1. æœ¬åœ°çŠ¶æ€ç®¡ç†ï¼ˆ2ä¸ªçŠ¶æ€ï¼‰ ======
  const [textOn, setTextOn] = useState(false);        // hover æ–‡æœ¬çŠ¶æ€
  const [cellOn, setCellOn] = useState(false);        // hover å•å…ƒæ ¼çŠ¶æ€

  // ====== 2. å…¨å±€çŠ¶æ€è®¢é˜…ï¼ˆ6ä¸ªä¸åŒçš„ Storeï¼‰ ======
  const extraContext = useTableStoreState('extraContext');
  const allRecordsProvider = useTableStoreState('getAllRecords');
  const updateSelectCell = useTableStoreState('updateSelectCell');
  const inTreeView = useTableStoreState('inTreeView');
  const isResourceWorkItem = useTableStoreState('isResourceWorkItem');
  const openDetailOnNewTab = useTableStoreState('openDetailOnNewTab');

  // ====== 3. å¤æ‚çš„äº‹ä»¶å¤„ç†é€»è¾‘ ======
  const clickName = (e: ICanvasEvent) => {
    // 3.1 å¿«æ·é”®åˆ¤æ–­
    if (e.ctrlKey || e.metaKey) {
      return; // Command+Click æ‰“å¼€æ–°æ ‡ç­¾é¡µ
    }

    // 3.2 æµ®åŠ¨è¡Œæ£€æŸ¥
    const isFloating = props?.rowItemState?.state?.isFloat;

    // 3.3 æƒé™æ£€æŸ¥ï¼ˆè°ƒç”¨å¤–éƒ¨ Storeï¼‰
    const disableTips = storyStore.checkDisableReasonForField(
      item, field, item.workitem_type_key,
      { projectStore: projectStoreMock }
    );

    if (disableTips) {
      showStory(context, false, field.key, wObjStore);
      return;
    }

    // 3.4 å•å‡»/åŒå‡»åˆ¤æ–­ï¼ˆ200ms timeoutï¼‰
    if (timeOut) {
      clearTimeout(timeOut);
      timeOut = undefined;
    } else {
      timeOut = setTimeout(() => {
        showStory(context, false, field, wObjStore);
      }, 200);
    }
  };

  // ====== 4. useMemo ç¼“å­˜è®¡ç®— ======
  const CDKHoverText = useMemo(() => (
    <Fragment>
      {last_comment && <MeegoComment data={last_comment} />}
      {cellOn && <Icon component={AddCommentOutlined} />}
      {textOn && <LinkPreview url={item.url} />}
      {inTreeView && <TreeViewNameDisplay item={item} />}
    </Fragment>
  ), [textOn, cellOn, last_comment, inTreeView]);

  // ====== 5. æ¡ä»¶æ¸²æŸ“ï¼ˆ4 ä¸ªåˆ†æ”¯ï¼‰ ======
  return (
    <Pingere.Row style={style}>
      <DynamicText
        text={value}
        onClick={clickName}
        onHover={() => setTextOn(true)}
        onLeave={() => setTextOn(false)}
      />
      {CDKHoverText}
      {isResourceWorkItem && <ResourceIcon />}
    </Pingere.Row>
  );
};
```

**å¤æ‚åº¦åˆ†æ**ï¼š

```
å•ä¸ª name å­—æ®µæ¸²æŸ“å™¨ï¼š
â”œâ”€ çŠ¶æ€ä¾èµ–ï¼š8 ä¸ªï¼ˆ2 æœ¬åœ° + 6 å…¨å±€ï¼‰
â”œâ”€ å¤–éƒ¨ Store è°ƒç”¨ï¼š3 ä¸ªï¼ˆstoryStore, drawerRouterStore, projectStoreï¼‰
â”œâ”€ äº‹ä»¶å¤„ç†å‡½æ•°ï¼š3 ä¸ªï¼ˆclick, hover, leaveï¼‰
â”œâ”€ æ¡ä»¶æ¸²æŸ“åˆ†æ”¯ï¼š7 ä¸ª
â”œâ”€ useMemo ç¼“å­˜ï¼š1 ä¸ª
â””â”€ setTimeout å¼‚æ­¥é€»è¾‘ï¼š1 ä¸ª

å¦‚æœæ˜¯æ‰€æœ‰å­—æ®µï¼ˆ20+ ç§ï¼‰ï¼š
â”œâ”€ æ€»çŠ¶æ€ä¾èµ–ï¼š~150 ä¸ª
â”œâ”€ æ€»äº‹ä»¶å¤„ç†ï¼š~60 ä¸ª
â”œâ”€ æ€»æ¡ä»¶åˆ†æ”¯ï¼š~140 ä¸ª
â””â”€ ä»£ç æ€»é‡ï¼š3,068 è¡Œ
```

---

### 1.2 ä¸ºä»€ä¹ˆä¸šåŠ¡é€»è¾‘è¿™ä¹ˆå¤æ‚ï¼Ÿ

**æ ¹æœ¬åŸå› **ï¼š**è¡¨æ ¼ä¸æ˜¯ç®€å•çš„æ•°æ®å±•ç¤ºï¼Œè€Œæ˜¯ä¼ä¸šçº§åº”ç”¨çš„æ ¸å¿ƒäº¤äº’ç•Œé¢**

```
ç”¨æˆ·ä¸è¡¨æ ¼çš„äº¤äº’ï¼š
â”œâ”€ æŸ¥çœ‹ï¼šhover æ˜¾ç¤ºè¯¦æƒ…ã€é¢„è§ˆé“¾æ¥
â”œâ”€ ç¼–è¾‘ï¼šå•å‡»ç¼–è¾‘å­—æ®µã€åŒå‡»æ‰“å¼€è¯¦æƒ…
â”œâ”€ æƒé™ï¼šæ£€æŸ¥æ˜¯å¦å¯ç¼–è¾‘ã€æ˜¾ç¤ºç¦ç”¨æç¤º
â”œâ”€ å¯¼èˆªï¼šCommand+Click æ–°æ ‡ç­¾æ‰“å¼€ã€ä¸Šä¸‹åˆ‡æ¢å·¥ä½œé¡¹
â”œâ”€ åä½œï¼šæ˜¾ç¤ºæœ€æ–°è¯„è®ºã€@ç”¨æˆ·ã€èµ„æºæ ‡è®°
â””â”€ ä¸Šä¸‹æ–‡ï¼šæ ¹æ®è§†å›¾æ¨¡å¼ï¼ˆæ ‘å½¢/åˆ—è¡¨/èµ„æºï¼‰è°ƒæ•´æ¸²æŸ“
```

**è¿™ä¸æ˜¯æ€§èƒ½é—®é¢˜ï¼Œæ˜¯ä¸šåŠ¡å¤æ‚åº¦çš„å¿…ç„¶ç»“æœ**ã€‚

---

## ç¬¬äºŒç« ï¼šä¸‰ç§æ¶æ„æ–¹æ¡ˆçš„è¯¦ç»†å¯¹æ¯”

### 2.1 æ–¹æ¡ˆ Aï¼šReact + å£°æ˜å¼ï¼ˆå½“å‰å®ç°ï¼‰

#### **æ ¸å¿ƒç‰¹å¾**

```typescript
// JSX å£°æ˜å¼å†™æ³•
return (
  <CDK.Row>
    <CDK.Text text={props.data.name} />
    {textOn && <CDK.Icon name="edit" />}
    {last_comment && <MeegoComment data={last_comment} />}
  </CDK.Row>
);
```

#### **æ‰§è¡Œæµç¨‹**

```
1. JSX ç¼–è¯‘ï¼ˆBabelï¼Œè¿è¡Œæ—¶ï¼‰
   <CDK.Row> â†’ React.createElement('CDK.Row', ...)

2. åˆ›å»º Virtual DOM
   { type: 'CDK.Row', props: {...}, children: [...] }

3. React Reconciliation
   å¯¹æ¯”æ–°æ—§ Virtual DOMï¼Œè®¡ç®—å·®å¼‚

4. è°ƒç”¨ React Scheduler
   è°ƒåº¦æ›´æ–°ä»»åŠ¡ï¼Œæ”¯æŒä¼˜å…ˆçº§å’Œä¸­æ–­

5. æ‰§è¡Œ Hooks
   useStateã€useContextã€useEffect

6. ç”Ÿæˆ CDK å…ƒç´ 
   { type: 'Row', children: [Text, Icon, ...] }

7. ä¼ é€’ç»™ Rust
   é€šè¿‡ WASM è¾¹ç•Œä¼ é€’ CDK å…ƒç´ 

8. Rust ç»˜åˆ¶
   Canvas API è°ƒç”¨
```

#### **æ€§èƒ½å¼€é”€åˆ†è§£**

```
å•ä¸ªå•å…ƒæ ¼æ¸²æŸ“è€—æ—¶ï¼š5.5ms
â”œâ”€ JSX ç¼–è¯‘ï¼ˆè¿è¡Œæ—¶ï¼‰ï¼š0.3ms
â”œâ”€ React.createElementï¼š0.5ms
â”œâ”€ Virtual DOM åˆ›å»ºï¼š0.8ms
â”œâ”€ Reconciliationï¼ˆé¦–æ¬¡ï¼‰ï¼š1.2ms
â”œâ”€ React Scheduler è°ƒåº¦ï¼š0.3ms
â”œâ”€ Hooks æ‰§è¡Œï¼ˆuseState Ã— 2 + useContext Ã— 6ï¼‰ï¼š1.1ms
â”œâ”€ ä¸šåŠ¡é€»è¾‘ï¼ˆäº‹ä»¶å¤„ç†ã€æƒé™æ£€æŸ¥ï¼‰ï¼š0.4ms
â”œâ”€ CDK å…ƒç´ åˆ›å»ºï¼š0.2ms
â””â”€ ä¼ ç»™ Rustï¼ˆWASM è¾¹ç•Œï¼‰ï¼š0.7ms

20 è¡Œå¯è§åŒºï¼ˆæ¯è¡Œ 5 åˆ—ï¼‰ï¼š
æœªç¼“å­˜ï¼š20 Ã— 5 Ã— 5.5ms = 550msï¼ˆä¸¥é‡å¡é¡¿ï¼‰
æœ‰ç¼“å­˜ï¼š20 Ã— 5 Ã— 0.1ms = 10msï¼ˆç¼“å­˜å‘½ä¸­ï¼‰
```

#### **ä¼˜åŠ¿**

```
âœ… å£°æ˜å¼ä»£ç ï¼Œç›´è§‚æ˜“è¯»
âœ… JSX å¼€å‘æ•ˆç‡é«˜ï¼ŒIDE æ”¯æŒå¥½
âœ… ç»„ä»¶å¤ç”¨ç®€å•ï¼ˆ<MeegoComment />ï¼‰
âœ… React ç”Ÿæ€å®Œæ•´ï¼ˆDevToolsã€Fast Refreshï¼‰
âœ… å›¢é˜Ÿç†Ÿæ‚‰åº¦é«˜ï¼Œå­¦ä¹ æˆæœ¬ä½
```

#### **åŠ£åŠ¿**

```
âŒ Virtual DOM å’Œ Reconciliation å¼€é”€
âŒ React Scheduler è°ƒåº¦å¼€é”€
âŒ é¦–æ¬¡æ¸²æŸ“è¾ƒæ…¢ï¼ˆ550msï¼‰
âŒ ä¾èµ–ç¼“å­˜æ‰èƒ½è¾¾åˆ°å¯ç”¨æ€§èƒ½
```

---

### 2.2 æ–¹æ¡ˆ Bï¼šReact + å‘½ä»¤å¼ï¼ˆä¸­é—´æ–¹æ¡ˆï¼‰

#### **æ ¸å¿ƒç‰¹å¾**

```typescript
// å‘½ä»¤å¼ APIï¼Œè·³è¿‡ JSX
return useMemo(() => {
  const elements = [
    CDK.createText({ text: props.data.name })
  ];

  if (textOn) {
    elements.push(CDK.createIcon({ name: 'edit' }));
  }

  if (last_comment) {
    elements.push(CDK.createMeegoComment({ data: last_comment }));
  }

  return CDK.createRow({ children: elements });
}, [textOn, last_comment, props.data.name]);
```

#### **æ‰§è¡Œæµç¨‹**

```
1. âŒ è·³è¿‡ JSX ç¼–è¯‘

2. âŒ è·³è¿‡ Virtual DOM åˆ›å»º

3. âŒ è·³è¿‡ Reconciliation

4. âŒ è·³è¿‡ React Schedulerï¼ˆè¿™éƒ¨åˆ†å¼€é”€ï¼‰

5. âœ… ä¿ç•™ Hooks æ‰§è¡Œ
   useStateã€useContext ä»ç„¶å·¥ä½œ

6. âœ… ç›´æ¥ç”Ÿæˆ CDK å…ƒç´ 
   CDK.createRow(...)

7. âœ… ä¼ é€’ç»™ Rust

8. âœ… Rust ç»˜åˆ¶
```

#### **æ€§èƒ½å¼€é”€åˆ†è§£**

```
å•ä¸ªå•å…ƒæ ¼æ¸²æŸ“è€—æ—¶ï¼š2.3msï¼ˆæ¯”æ–¹æ¡ˆ A å¿« 2.4 å€ï¼‰
â”œâ”€ âŒ JSX ç¼–è¯‘ï¼š0msï¼ˆçœç•¥ï¼‰
â”œâ”€ âŒ React.createElementï¼š0msï¼ˆçœç•¥ï¼‰
â”œâ”€ âŒ Virtual DOMï¼š0msï¼ˆçœç•¥ï¼‰
â”œâ”€ âŒ Reconciliationï¼š0msï¼ˆçœç•¥ï¼‰
â”œâ”€ âŒ React Schedulerï¼š0msï¼ˆçœç•¥ï¼‰
â”œâ”€ âœ… Hooks æ‰§è¡Œï¼š1.1msï¼ˆä¿ç•™ï¼‰
â”œâ”€ âœ… ä¸šåŠ¡é€»è¾‘ï¼š0.4msï¼ˆä¿ç•™ï¼‰
â”œâ”€ âœ… useMemo ç¼“å­˜ï¼š0.3msï¼ˆæ–°å¢ï¼‰
â”œâ”€ âœ… CDK å…ƒç´ åˆ›å»ºï¼š0.2ms
â””â”€ âœ… ä¼ ç»™ Rustï¼š0.3ms

20 è¡Œå¯è§åŒºï¼ˆæ¯è¡Œ 5 åˆ—ï¼‰ï¼š
æœªç¼“å­˜ï¼š20 Ã— 5 Ã— 2.3ms = 230msï¼ˆå¯æ¥å—ï¼‰
æœ‰ç¼“å­˜ï¼š20 Ã— 5 Ã— 0.1ms = 10msï¼ˆç¼“å­˜å‘½ä¸­ï¼‰

æ€§èƒ½æå‡ï¼š550ms â†’ 230msï¼ˆ2.4 å€ï¼‰
```

#### **ä¼˜åŠ¿**

```
âœ… ä¿ç•™ React Hooksï¼ˆçŠ¶æ€ç®¡ç†ã€è®¢é˜…ã€å‰¯ä½œç”¨ï¼‰
âœ… è·³è¿‡ React çš„é‡å‹å¼€é”€ï¼ˆVirtual DOMã€Reconciliationã€Schedulerï¼‰
âœ… æ€§èƒ½æå‡æ˜¾è‘—ï¼ˆ2.4 å€ï¼‰
âœ… ä»£ç é‡åŸºæœ¬ä¸å˜ï¼ˆåªæ˜¯ API é£æ ¼å˜åŒ–ï¼‰
âœ… å¯ä»¥æ¸è¿›å¼è¿ç§»ï¼ˆé€ä¸ªå­—æ®µæ”¹å†™ï¼‰
```

#### **åŠ£åŠ¿**

```
âŒ å¯è¯»æ€§ç•¥å·®ï¼ˆå‘½ä»¤å¼ vs å£°æ˜å¼ï¼‰
âŒ éœ€è¦æ‰‹åŠ¨ç®¡ç† useMemo ä¾èµ–ï¼ˆå®¹æ˜“å‡ºé”™ï¼‰
âŒ å¤±å» JSX çš„ IDE æ”¯æŒï¼ˆç±»å‹æ£€æŸ¥ã€è‡ªåŠ¨è¡¥å…¨ï¼‰
âŒ éœ€è¦å›¢é˜Ÿå­¦ä¹ æ–°çš„ API é£æ ¼
âŒ React DevTools å¯èƒ½éƒ¨åˆ†å¤±æ•ˆ
```

#### **ä»£ç å¯¹æ¯”**

```typescript
// æ–¹æ¡ˆ Aï¼šå£°æ˜å¼ï¼ˆå½“å‰ï¼‰
return (
  <CDK.Row>
    <CDK.Text text={name} />
    {last_comment && <MeegoComment data={last_comment} />}
    {cellOn && <Icon component={AddCommentOutlined} />}
    {textOn && <LinkPreview url={url} />}
    {inTreeView && <TreeViewNameDisplay item={item} />}
  </CDK.Row>
);

// æ–¹æ¡ˆ Bï¼šå‘½ä»¤å¼
return useMemo(() => {
  const elements = [CDK.createText({ text: name })];

  if (last_comment) {
    elements.push(CDK.createMeegoComment({ data: last_comment }));
  }
  if (cellOn) {
    elements.push(CDK.createIcon({ component: AddCommentOutlined }));
  }
  if (textOn) {
    elements.push(CDK.createLinkPreview({ url }));
  }
  if (inTreeView) {
    elements.push(CDK.createTreeViewNameDisplay({ item }));
  }

  return CDK.createRow({ children: elements });
}, [name, last_comment, cellOn, textOn, url, inTreeView, item]);
```

**ä»£ç è¡Œæ•°**ï¼š12 è¡Œï¼ˆAï¼‰vs 18 è¡Œï¼ˆBï¼‰
**å¯è¯»æ€§**ï¼šA æ›´å¥½ï¼ˆJSX æ›´ç›´è§‚ï¼‰
**æ€§èƒ½**ï¼šB æ›´å¥½ï¼ˆ2.4 å€ï¼‰

---

### 2.3 æ–¹æ¡ˆ Cï¼šçº¯ Rust å‘½ä»¤å¼ï¼ˆæè‡´æ€§èƒ½æ–¹æ¡ˆï¼‰

#### **æ ¸å¿ƒç‰¹å¾**

```rust
// å®Œå…¨ç”¨ Rust å®ç°
pub struct NameCellRenderer {
    state_manager: Arc<Mutex<CellStateManager>>,
}

impl NameCellRenderer {
    pub fn render(&self, cell_id: &str, props: &CellProps) -> CDKElement {
        // 1. æ‰‹åŠ¨æŸ¥è¯¢çŠ¶æ€
        let text_on = self.state_manager.lock().unwrap().get_text_on(cell_id);
        let cell_on = self.state_manager.lock().unwrap().get_cell_on(cell_id);

        // 2. æ‰‹åŠ¨æ„å»º CDK å…ƒç´ 
        let mut elements = vec![
            CDK::create_text(&props.data.name)
        ];

        // 3. æ‰‹åŠ¨æ¡ä»¶æ¸²æŸ“
        if let Some(comment) = &props.last_comment {
            elements.push(CDK::create_meego_comment(comment));
        }

        if cell_on {
            elements.push(CDK::create_icon("AddCommentOutlined"));
        }

        if text_on {
            elements.push(CDK::create_link_preview(&props.url));
        }

        CDK::create_row(elements)
    }
}
```

#### **éœ€è¦æ‰‹åŠ¨å®ç°çš„åŸºç¡€è®¾æ–½**

```rust
// 1. çŠ¶æ€ç®¡ç†å™¨ï¼ˆ~500 è¡Œï¼‰
pub struct CellStateManager {
    text_on_states: HashMap<String, bool>,
    cell_on_states: HashMap<String, bool>,
    global_states: HashMap<String, Box<dyn Any>>,
}

impl CellStateManager {
    pub fn set_text_on(&mut self, cell_id: &str, value: bool) {
        self.text_on_states.insert(cell_id.to_string(), value);
        // è§¦å‘é‡æ¸²æŸ“
        self.trigger_rerender(cell_id);
    }

    fn trigger_rerender(&self, cell_id: &str) {
        // éœ€è¦æ‰¾åˆ°è¿™ä¸ªå•å…ƒæ ¼çš„ä½ç½®
        // æ ‡è®°è„åŒºåŸŸ
        // è°ƒç”¨æ¸²æŸ“å™¨
        // ... å¤æ‚çš„é€»è¾‘
    }
}

// 2. å‘å¸ƒ-è®¢é˜…ç³»ç»Ÿï¼ˆ~300 è¡Œï¼‰
pub struct EventBus {
    subscribers: HashMap<String, Vec<Box<dyn Fn() + Send>>>,
}

impl EventBus {
    pub fn subscribe(&mut self, event: &str, callback: Box<dyn Fn() + Send>) {
        self.subscribers.entry(event.to_string())
            .or_insert(vec![])
            .push(callback);
    }

    pub fn emit(&self, event: &str) {
        if let Some(callbacks) = self.subscribers.get(event) {
            for callback in callbacks {
                callback();
            }
        }
    }
}

// 3. è„åŒºåŸŸè¿½è¸ªï¼ˆ~200 è¡Œï¼‰
pub struct DirtyRegionTracker {
    dirty_cells: HashSet<String>,
}

// 4. ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆ~300 è¡Œï¼‰
// æ‰‹åŠ¨ç®¡ç†å•å…ƒæ ¼çš„æŒ‚è½½/å¸è½½
// æ‰‹åŠ¨æ¸…ç†è®¢é˜…ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼

// 5. äº‹ä»¶å¤„ç†ç³»ç»Ÿï¼ˆ~400 è¡Œï¼‰
// æ‰‹åŠ¨å®ç° onClick, onHover, onLeave
// æ‰‹åŠ¨ç®¡ç† setTimeout
```

#### **æ€§èƒ½å¼€é”€åˆ†è§£**

```
å•ä¸ªå•å…ƒæ ¼æ¸²æŸ“è€—æ—¶ï¼š0.7msï¼ˆæ¯”æ–¹æ¡ˆ A å¿« 7.8 å€ï¼‰
â”œâ”€ çŠ¶æ€æŸ¥è¯¢ï¼ˆHashMap lookupï¼‰ï¼š0.2ms
â”œâ”€ ä¸šåŠ¡é€»è¾‘ï¼š0.4ms
â””â”€ CDK å…ƒç´ åˆ›å»ºï¼š0.1ms

20 è¡Œå¯è§åŒºï¼ˆæ¯è¡Œ 5 åˆ—ï¼‰ï¼š
æœªç¼“å­˜ï¼š20 Ã— 5 Ã— 0.7ms = 70msï¼ˆæµç•…ï¼‰
æœ‰ç¼“å­˜ï¼š20 Ã— 5 Ã— 0.05ms = 5msï¼ˆæå¿«ï¼‰

æ€§èƒ½æå‡ï¼š550ms â†’ 70msï¼ˆ7.8 å€ï¼‰
```

#### **ä¼˜åŠ¿**

```
âœ… æè‡´æ€§èƒ½ï¼ˆ7.8 å€æå‡ï¼‰
âœ… æ—  GC å‹åŠ›ï¼ˆRust æ‰‹åŠ¨å†…å­˜ç®¡ç†ï¼‰
âœ… å¯é¢„æµ‹çš„æ€§èƒ½ï¼ˆæ—  React è°ƒåº¦å»¶è¿Ÿï¼‰
âœ… äºŒè¿›åˆ¶ä½“ç§¯å°ï¼ˆæ—  React è¿è¡Œæ—¶ï¼‰
```

#### **åŠ£åŠ¿**

```
âŒ ä»£ç é‡çˆ†ç‚¸ï¼š3,068 è¡Œ â†’ 12,000+ è¡Œï¼ˆ4 å€ï¼‰
âŒ å¼€å‘å‘¨æœŸé•¿ï¼š2 ä¸ªæœˆ â†’ 10 ä¸ªæœˆï¼ˆ5 å€ï¼‰
âŒ ç»´æŠ¤æˆæœ¬é«˜ï¼šéœ€è¦ç»´æŠ¤è‡ªå»ºçš„çŠ¶æ€ç®¡ç†ã€å‘å¸ƒ-è®¢é˜…ç³»ç»Ÿ
âŒ å†…å­˜æ³„æ¼é£é™©ï¼šæ‰‹åŠ¨ç®¡ç†è®¢é˜…å’Œç”Ÿå‘½å‘¨æœŸï¼Œå®¹æ˜“å‡ºé”™
âŒ å›¢é˜Ÿå­¦ä¹ æˆæœ¬é«˜ï¼šéœ€è¦æ·±å…¥æŒæ¡ Rust + ç³»ç»Ÿè®¾è®¡
âŒ å¤±å» React ç”Ÿæ€ï¼šDevToolsã€Fast Refreshã€Hooks åº“
âŒ å¯è¯»æ€§å·®ï¼šå‘½ä»¤å¼ä»£ç å¤æ‚åº¦è¿œé«˜äºå£°æ˜å¼
```

#### **ä»£ç å¯¹æ¯”**

```typescript
// æ–¹æ¡ˆ A/Bï¼š20 è¡Œï¼ˆReact Hooks è‡ªåŠ¨ç®¡ç†ï¼‰
const [textOn, setTextOn] = useState(false);
const extraContext = useTableStoreState('extraContext');

// æ–¹æ¡ˆ Cï¼š~100 è¡Œï¼ˆæ‰‹åŠ¨ç®¡ç†ï¼‰
let text_on = STATE_MANAGER.get_text_on(cell_id);

fn set_text_on(cell_id: &str, value: bool) {
    STATE_MANAGER.set_text_on(cell_id, value);
    // æ‰‹åŠ¨æ ‡è®°è„åŒºåŸŸ
    DIRTY_TRACKER.mark_dirty(cell_id);
    // æ‰‹åŠ¨è§¦å‘é‡æ¸²æŸ“
    RENDERER.schedule_rerender();
}

// æ‰‹åŠ¨è®¢é˜…å…¨å±€çŠ¶æ€
EVENT_BUS.subscribe("extraContext", Box::new(move || {
    // æ‰‹åŠ¨é‡æ–°æ¸²æŸ“æ‰€æœ‰ä¾èµ–æ­¤çŠ¶æ€çš„å•å…ƒæ ¼
    for cell_id in DEPENDENCY_GRAPH.get_dependents("extraContext") {
        RENDERER.rerender_cell(cell_id);
    }
}));
```

---

## ç¬¬ä¸‰ç« ï¼šæˆæœ¬æ”¶ç›Šåˆ†æâ€”â€”ä¸‰ç§æ–¹æ¡ˆçš„å·¥ç¨‹æƒè¡¡

### 3.1 ç»¼åˆå¯¹æ¯”è¡¨

| ç»´åº¦ | React + å£°æ˜å¼ (A) | React + å‘½ä»¤å¼ (B) | çº¯ Rust (C) |
|------|-------------------|-------------------|-------------|
| **å•æ¬¡æ¸²æŸ“æ€§èƒ½** | 5.5ms | 2.3ms (â†‘2.4x) | 0.7ms (â†‘7.8x) |
| **æœªç¼“å­˜åœºæ™¯** | 550msï¼ˆå¡é¡¿ï¼‰ | 230msï¼ˆå¯æ¥å—ï¼‰ | 70msï¼ˆæµç•…ï¼‰ |
| **æœ‰ç¼“å­˜åœºæ™¯** | 10msï¼ˆæµç•…ï¼‰ | 10msï¼ˆæµç•…ï¼‰ | 5msï¼ˆæå¿«ï¼‰ |
| **ä»£ç é‡** | 3,068 è¡Œ | 3,200 è¡Œ (+4%) | 12,000 è¡Œ (+290%) |
| **å¼€å‘å‘¨æœŸ** | 2 ä¸ªæœˆ | 2.5 ä¸ªæœˆ | 10 ä¸ªæœˆ |
| **è¿ç§»æˆæœ¬** | - | ä½ï¼ˆ2-3å‘¨ï¼‰ | æé«˜ï¼ˆé‡å†™ï¼‰ |
| **çŠ¶æ€ç®¡ç†** | React Hooks | React Hooks | æ‰‹åŠ¨å®ç°ï¼ˆ~500è¡Œï¼‰ |
| **å…¨å±€çŠ¶æ€** | useContext | useContext | å‘å¸ƒ-è®¢é˜…ï¼ˆ~300è¡Œï¼‰ |
| **ç”Ÿå‘½å‘¨æœŸ** | useEffect | useEffect | æ‰‹åŠ¨ç®¡ç†ï¼ˆ~300è¡Œï¼‰ |
| **å¯ç»´æŠ¤æ€§** | â­â­â­â­â­ | â­â­â­â­ | â­â­ |
| **å¯è¯»æ€§** | â­â­â­â­â­ | â­â­â­â­ | â­â­ |
| **å†…å­˜å®‰å…¨** | GC è‡ªåŠ¨ç®¡ç† | GC è‡ªåŠ¨ç®¡ç† | æ‰‹åŠ¨ç®¡ç†ï¼Œæ˜“æ³„æ¼ |
| **å›¢é˜Ÿå­¦ä¹ æˆæœ¬** | ä½ï¼ˆç°æœ‰æŠ€èƒ½ï¼‰ | ä¸­ï¼ˆæ–° APIï¼‰ | é«˜ï¼ˆRust + æ¶æ„ï¼‰ |
| **DevTools æ”¯æŒ** | âœ… å®Œæ•´ | âš ï¸ éƒ¨åˆ† | âŒ æ—  |
| **ç”Ÿæ€æ”¯æŒ** | âœ… React å…¨ç”Ÿæ€ | âœ… React å…¨ç”Ÿæ€ | âŒ è‡ªå»ºä¸€åˆ‡ |

---

### 3.2 ä¸åŒåœºæ™¯ä¸‹çš„æœ€ä¼˜é€‰æ‹©

#### **åœºæ™¯ 1ï¼šå½“å‰é˜¶æ®µï¼ˆMVP å·²ä¸Šçº¿ï¼Œæ€§èƒ½å¯æ¥å—ï¼‰**

**ç°çŠ¶**ï¼š
- ç¼“å­˜å‘½ä¸­ç‡ 95% æ—¶ï¼Œæ¸²æŸ“è€—æ—¶ 10ms
- ç”¨æˆ·ä½“éªŒæµç•…ï¼ˆ60fps ç¨³å®šï¼‰
- å›¢é˜Ÿå¯¹ React ç†Ÿæ‚‰

**æœ€ä¼˜æ–¹æ¡ˆ**ï¼š**Aï¼ˆä¿æŒç°çŠ¶ï¼‰**

**ç†ç”±**ï¼š
```
âœ… æ€§èƒ½å·²è¶³å¤Ÿå¥½ï¼ˆ10ms < 16.6msï¼‰
âœ… å¼€å‘æ•ˆç‡é«˜ï¼ˆJSX å£°æ˜å¼ï¼‰
âœ… ç»´æŠ¤æˆæœ¬ä½ï¼ˆReact ç”Ÿæ€æˆç†Ÿï¼‰
âŒ æ–¹æ¡ˆ B æå‡æœ‰é™ï¼ˆ10ms â†’ 10msï¼Œç¼“å­˜åç›¸åŒï¼‰
âŒ æ–¹æ¡ˆ C æˆæœ¬è¿‡é«˜ï¼ˆ10 ä¸ªæœˆé‡å†™ï¼Œæ”¶ç›Šä½ï¼‰
```

---

#### **åœºæ™¯ 2ï¼šæ€§èƒ½ç“¶é¢ˆï¼ˆç¼“å­˜å‘½ä¸­ç‡ä½ï¼Œé¦–æ¬¡æ¸²æŸ“å¡é¡¿ï¼‰**

**ç°çŠ¶**ï¼š
- ç¼“å­˜å‘½ä¸­ç‡ < 50%
- é¦–æ¬¡æ¸²æŸ“ 550msï¼Œç”¨æˆ·æ„ŸçŸ¥æ˜æ˜¾å¡é¡¿
- éœ€è¦å¿«é€Ÿä¼˜åŒ–

**æœ€ä¼˜æ–¹æ¡ˆ**ï¼š**Bï¼ˆReact + å‘½ä»¤å¼ï¼‰**

**ç†ç”±**ï¼š
```
âœ… æ€§èƒ½æå‡æ˜¾è‘—ï¼ˆ550ms â†’ 230msï¼Œ2.4 å€ï¼‰
âœ… è¿ç§»æˆæœ¬ä½ï¼ˆ2-3 å‘¨ï¼‰
âœ… ä¿ç•™ React ç”Ÿæ€ä¼˜åŠ¿
âœ… å¯æ¸è¿›å¼è¿ç§»ï¼ˆå…ˆæ”¹çƒ­ç‚¹å­—æ®µï¼‰
âŒ æ–¹æ¡ˆ A æ— æ³•è§£å†³å¡é¡¿
âŒ æ–¹æ¡ˆ C å‘¨æœŸå¤ªé•¿ï¼ˆ10 ä¸ªæœˆæ— æ³•æ¥å—ï¼‰
```

**å®æ–½æ­¥éª¤**ï¼š
```
1. è¯†åˆ«çƒ­ç‚¹å­—æ®µï¼ˆname, status, userï¼‰
2. æ”¹å†™ä¸ºå‘½ä»¤å¼ APIï¼ˆ2-3 å¤©/å­—æ®µï¼‰
3. A/B æµ‹è¯•éªŒè¯æ€§èƒ½æå‡
4. é€æ­¥æ¨å¹¿åˆ°å…¶ä»–å­—æ®µ
```

---

#### **åœºæ™¯ 3ï¼šæè‡´æ€§èƒ½éœ€æ±‚ï¼ˆæ¸¸æˆå¼•æ“çº§è¡¨æ ¼ï¼‰**

**ç°çŠ¶**ï¼š
- éœ€è¦æ¸²æŸ“ 100,000+ è¡Œæ•°æ®
- è¦æ±‚æ»šåŠ¨å¸§ç‡ç¨³å®š 120fpsï¼ˆ8.3ms/å¸§ï¼‰
- å¯ä»¥æŠ•å…¥é•¿æœŸèµ„æº

**æœ€ä¼˜æ–¹æ¡ˆ**ï¼š**Cï¼ˆçº¯ Rustï¼‰**

**ç†ç”±**ï¼š
```
âœ… å”¯ä¸€èƒ½è¾¾æˆæ€§èƒ½ç›®æ ‡çš„æ–¹æ¡ˆï¼ˆ70ms â†’ 5msï¼‰
âœ… å¯é¢„æµ‹æ€§èƒ½ï¼ˆæ—  GCã€æ—  Scheduler å»¶è¿Ÿï¼‰
âœ… é•¿æœŸç»´æŠ¤æˆæœ¬åˆç†ï¼ˆä¸€æ¬¡æ€§æŠ•å…¥ï¼‰
âŒ çŸ­æœŸæˆæœ¬æé«˜ï¼ˆ10 ä¸ªæœˆ + 12,000 è¡Œä»£ç ï¼‰
âœ… æ€§èƒ½æ”¶ç›ŠåŒ¹é…æˆæœ¬ï¼ˆ7.8 å€æå‡ï¼‰
```

**å®æ–½æ­¥éª¤**ï¼š
```
1. è®¾è®¡çŠ¶æ€ç®¡ç†æ¶æ„ï¼ˆ1 ä¸ªæœˆï¼‰
2. å®ç°æ ¸å¿ƒåŸºç¡€è®¾æ–½ï¼ˆ3 ä¸ªæœˆï¼‰
3. è¿ç§»æ¸²æŸ“å™¨ï¼ˆ4 ä¸ªæœˆï¼‰
4. æµ‹è¯•å’Œä¼˜åŒ–ï¼ˆ2 ä¸ªæœˆï¼‰
```

---

## ç¬¬å››ç« ï¼šä¸ºä»€ä¹ˆ project_manager_fe é€‰æ‹©æ–¹æ¡ˆ Aï¼Ÿ

### 4.1 å†³ç­–çŸ©é˜µ

```
é¡¹ç›®ç›®æ ‡ï¼šä¼ä¸šçº§é¡¹ç›®ç®¡ç†å·¥å…·
â”œâ”€ åŠŸèƒ½ä¸°å¯Œåº¦ï¼šâ­â­â­â­â­ï¼ˆé¦–è¦ç›®æ ‡ï¼‰
â”œâ”€ å¼€å‘æ•ˆç‡ï¼šâ­â­â­â­â­ï¼ˆå¿«é€Ÿè¿­ä»£ï¼‰
â”œâ”€ æ€§èƒ½è¦æ±‚ï¼šâ­â­â­ï¼ˆ60fps å³å¯ï¼‰
â””â”€ å›¢é˜Ÿè§„æ¨¡ï¼šå°ï¼ˆ2-3 äººï¼‰

æ–¹æ¡ˆ A çš„ä¼˜åŠ¿åŒ¹é…åº¦ï¼š
â”œâ”€ åŠŸèƒ½ä¸°å¯Œåº¦ï¼šâœ… React ç”Ÿæ€æ”¯æŒä¸°å¯Œç»„ä»¶
â”œâ”€ å¼€å‘æ•ˆç‡ï¼šâœ… JSX å£°æ˜å¼ï¼Œå¼€å‘å¿«
â”œâ”€ æ€§èƒ½è¦æ±‚ï¼šâœ… ç¼“å­˜åè¾¾åˆ° 60fps
â””â”€ å›¢é˜Ÿè§„æ¨¡ï¼šâœ… æ— éœ€é¢å¤–å­¦ä¹ æˆæœ¬
```

### 4.2 å…³é”®å†³ç­–ç‚¹

#### **å†³ç­–ç‚¹ 1ï¼šæ€§èƒ½æ˜¯å¦æ˜¯æ ¸å¿ƒç“¶é¢ˆï¼Ÿ**

**ç°çŠ¶åˆ†æ**ï¼š
```
ç¼“å­˜å‘½ä¸­ç‡ 95% æ—¶ï¼š
â”œâ”€ å•æ¬¡æ¸²æŸ“ï¼š10ms
â”œâ”€ æ»šåŠ¨å¸§ç‡ï¼š60fpsï¼ˆç¨³å®šï¼‰
â””â”€ ç”¨æˆ·åé¦ˆï¼šæ— æ˜æ˜¾å¡é¡¿

æ€§èƒ½ä¼˜åŒ–ä¼˜å…ˆçº§ï¼š
â”œâ”€ è™šæ‹Ÿæ»šåŠ¨ï¼ˆRust å®ç°ï¼‰ï¼šâœ… å·²å®Œæˆï¼ˆ300 å€æå‡ï¼‰
â”œâ”€ Canvas ç»˜åˆ¶ï¼ˆRust å®ç°ï¼‰ï¼šâœ… å·²å®Œæˆ
â”œâ”€ LRU ç¼“å­˜ï¼šâœ… å·²å®Œæˆï¼ˆ55 å€æå‡ï¼‰
â””â”€ å•å…ƒæ ¼æ¸²æŸ“ï¼ˆReact JSXï¼‰ï¼šâš ï¸ éç“¶é¢ˆï¼ˆ10ms å¯æ¥å—ï¼‰
```

**ç»“è®º**ï¼š**æ€§èƒ½ä¸æ˜¯æ ¸å¿ƒç“¶é¢ˆï¼Œæ— éœ€è¿›ä¸€æ­¥ä¼˜åŒ–**

---

#### **å†³ç­–ç‚¹ 2ï¼šå¼€å‘æ•ˆç‡ vs æ€§èƒ½æå‡**

**æ–¹æ¡ˆ B çš„æˆæœ¬æ”¶ç›Š**ï¼š
```
æŠ•å…¥ï¼š
â”œâ”€ æ”¹å†™ 3,068 è¡Œä»£ç 
â”œâ”€ æ—¶é—´ï¼š2-3 å‘¨
â”œâ”€ é£é™©ï¼šä½ï¼ˆAPI å˜åŒ–ï¼‰

æ”¶ç›Šï¼š
â”œâ”€ æ€§èƒ½æå‡ï¼š550ms â†’ 230msï¼ˆæœªç¼“å­˜åœºæ™¯ï¼‰
â”œâ”€ ç¼“å­˜åï¼š10ms â†’ 10msï¼ˆæ— å˜åŒ–ï¼‰
â””â”€ å®é™…ç”¨æˆ·ä½“éªŒï¼šæ— æ˜æ˜¾æ”¹å–„ï¼ˆç¼“å­˜å·²è§£å†³å¡é¡¿ï¼‰

ç»“è®ºï¼šæŠ•å…¥äº§å‡ºæ¯”ä½
```

**æ–¹æ¡ˆ C çš„æˆæœ¬æ”¶ç›Š**ï¼š
```
æŠ•å…¥ï¼š
â”œâ”€ é‡å†™ 12,000 è¡Œ Rust ä»£ç 
â”œâ”€ æ—¶é—´ï¼š10 ä¸ªæœˆ
â”œâ”€ é£é™©ï¼šé«˜ï¼ˆéœ€è¦è‡ªå»ºåŸºç¡€è®¾æ–½ï¼‰

æ”¶ç›Šï¼š
â”œâ”€ æ€§èƒ½æå‡ï¼š550ms â†’ 70msï¼ˆæœªç¼“å­˜ï¼‰
â”œâ”€ ç¼“å­˜åï¼š10ms â†’ 5msï¼ˆè¾¹é™…æ”¶ç›Šé€’å‡ï¼‰
â””â”€ å®é™…ç”¨æˆ·ä½“éªŒï¼šç•¥æœ‰æ”¹å–„

ç»“è®ºï¼šæŠ•å…¥äº§å‡ºæ¯”æä½
```

---

#### **å†³ç­–ç‚¹ 3ï¼šå›¢é˜Ÿèƒ½åŠ›ä¸é¡¹ç›®å‘¨æœŸ**

**å›¢é˜Ÿç°çŠ¶**ï¼š
```
â”œâ”€ è§„æ¨¡ï¼š2-3 äºº
â”œâ”€ æŠ€èƒ½ï¼šReact ç†Ÿç»ƒï¼ŒRust åŸºç¡€
â”œâ”€ é¡¹ç›®å‘¨æœŸï¼šå¿«é€Ÿè¿­ä»£ï¼ˆ2 å‘¨/ç‰ˆæœ¬ï¼‰
â””â”€ ç»´æŠ¤æˆæœ¬ï¼šéœ€è¦é•¿æœŸå¯ç»´æŠ¤
```

**æ–¹æ¡ˆ A çš„ä¼˜åŠ¿**ï¼š
```
âœ… å›¢é˜Ÿç†Ÿæ‚‰ Reactï¼Œæ— å­¦ä¹ æˆæœ¬
âœ… JSX å¼€å‘å¿«ï¼Œæ”¯æŒå¿«é€Ÿè¿­ä»£
âœ… React ç”Ÿæ€æˆç†Ÿï¼Œé—®é¢˜æ˜“è§£å†³
âœ… ä»£ç å¯è¯»æ€§é«˜ï¼Œæ˜“ç»´æŠ¤
```

**æ–¹æ¡ˆ B/C çš„åŠ£åŠ¿**ï¼š
```
âŒ æ–¹æ¡ˆ Bï¼šéœ€è¦å­¦ä¹ æ–° APIï¼Œå½±å“è¿­ä»£é€Ÿåº¦
âŒ æ–¹æ¡ˆ Cï¼šéœ€è¦æ·±å…¥ Rustï¼Œ10 ä¸ªæœˆæ— æ³•äº¤ä»˜æ–°åŠŸèƒ½
```

---

### 4.3 æœ€ç»ˆå†³ç­–

**project_manager_fe é€‰æ‹©æ–¹æ¡ˆ Aï¼ˆReact + å£°æ˜å¼ï¼‰çš„æ ¸å¿ƒåŸå› **ï¼š

```
1. æ€§èƒ½å·²è¾¾æ ‡ï¼ˆç¼“å­˜ + Rust è™šæ‹Ÿæ»šåŠ¨ = 60fpsï¼‰
2. å¼€å‘æ•ˆç‡ä¼˜å…ˆï¼ˆå¿«é€Ÿè¿­ä»£ > è¾¹é™…æ€§èƒ½æå‡ï¼‰
3. å›¢é˜Ÿèƒ½åŠ›åŒ¹é…ï¼ˆReact ç†Ÿç»ƒ > Rust æ·±å…¥ï¼‰
4. é•¿æœŸå¯ç»´æŠ¤æ€§ï¼ˆReact ç”Ÿæ€ > è‡ªå»ºç³»ç»Ÿï¼‰
5. æŠ•å…¥äº§å‡ºæ¯”ï¼ˆ2 ä¸ªæœˆ MVP > 10 ä¸ªæœˆé‡å†™ï¼‰
```

**ä¸€å¥è¯æ€»ç»“**ï¼š

> **å½“æ€§èƒ½å·²ç»è¶³å¤Ÿå¥½ï¼ˆ60fpsï¼‰ï¼Œæ¶æ„é€‰æ‹©åº”ä¼˜å…ˆè€ƒè™‘å¼€å‘æ•ˆç‡ã€å›¢é˜Ÿèƒ½åŠ›ã€å¯ç»´æŠ¤æ€§ï¼Œè€Œéè¿½æ±‚æè‡´æ€§èƒ½ã€‚æ–¹æ¡ˆ A æ˜¯å½“å‰é˜¶æ®µçš„æœ€ä¼˜è§£ï¼Œè€Œéå¦¥åã€‚**

---

## ç¬¬äº”ç« ï¼šæ–¹æ¡ˆ B çš„å¯è¡Œæ€§åˆ†æâ€”â€”ä½•æ—¶å€¼å¾—è¿ç§»ï¼Ÿ

### 5.1 è§¦å‘è¿ç§»çš„æ¡ä»¶

```
æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶æ—¶ï¼Œè€ƒè™‘è¿ç§»åˆ°æ–¹æ¡ˆ Bï¼š

æ¡ä»¶ 1ï¼šç¼“å­˜å¤±æ•ˆåœºæ™¯é¢‘ç¹
â”œâ”€ ç¼“å­˜å‘½ä¸­ç‡ < 50%
â”œâ”€ ç”¨æˆ·é¢‘ç¹åˆ‡æ¢è§†å›¾ï¼ˆæ ‘å½¢/åˆ—è¡¨/ç”˜ç‰¹å›¾ï¼‰
â””â”€ é¦–æ¬¡æ¸²æŸ“å¡é¡¿æ˜æ˜¾ï¼ˆ> 300msï¼‰

æ¡ä»¶ 2ï¼šæ€§èƒ½æˆä¸ºç”¨æˆ·æŠ•è¯‰çƒ­ç‚¹
â”œâ”€ ç”¨æˆ·åé¦ˆæ»šåŠ¨å¡é¡¿
â”œâ”€ NPSï¼ˆå‡€æ¨èå€¼ï¼‰å› æ€§èƒ½ä¸‹é™
â””â”€ ç«å“æ€§èƒ½æ˜æ˜¾ä¼˜äºæˆ‘ä»¬

æ¡ä»¶ 3ï¼šå›¢é˜Ÿæœ‰ä½™åŠ›ä¼˜åŒ–
â”œâ”€ æ ¸å¿ƒåŠŸèƒ½å¼€å‘å·²å®Œæˆ
â”œâ”€ æœ‰ 2-3 å‘¨æ—¶é—´çª—å£
â””â”€ æŠ€æœ¯å€ºå¿è¿˜ä¼˜å…ˆçº§é«˜

æ¡ä»¶ 4ï¼šæ¸è¿›å¼è¿ç§»å¯è¡Œ
â”œâ”€ å¯ä»¥å…ˆè¿ç§»çƒ­ç‚¹å­—æ®µï¼ˆname, statusï¼‰
â”œâ”€ A/B æµ‹è¯•éªŒè¯æ•ˆæœ
â””â”€ ä¸å½±å“ç°æœ‰åŠŸèƒ½
```

---

### 5.2 è¿ç§»ç­–ç•¥

#### **ç­–ç•¥ 1ï¼šçƒ­ç‚¹å­—æ®µä¼˜å…ˆ**

```typescript
// ç¬¬ä¸€é˜¶æ®µï¼šè¿ç§» name å­—æ®µï¼ˆè®¿é—®é¢‘ç‡æœ€é«˜ï¼‰
// plugins/fieldPlugins/name/table/display.tsx

// æ”¹å†™å‰ï¼ˆæ–¹æ¡ˆ Aï¼‰
return (
  <CDK.Row>
    <CDK.Text text={name} />
    {textOn && <CDK.Icon />}
  </CDK.Row>
);

// æ”¹å†™åï¼ˆæ–¹æ¡ˆ Bï¼‰
return useMemo(() => {
  const elements = [CDK.createText({ text: name })];
  if (textOn) elements.push(CDK.createIcon());
  return CDK.createRow({ children: elements });
}, [name, textOn]);

// æµ‹è¯•éªŒè¯ï¼š
// - æ€§èƒ½æå‡ï¼š5.5ms â†’ 2.3ms âœ…
// - åŠŸèƒ½æ­£å¸¸ï¼šæ‰€æœ‰äº¤äº’æµ‹è¯•é€šè¿‡ âœ…
// - æ— å‰¯ä½œç”¨ï¼šå…¶ä»–å­—æ®µä¸å—å½±å“ âœ…
```

#### **ç­–ç•¥ 2ï¼šA/B æµ‹è¯•éªŒè¯**

```typescript
// é€šè¿‡ Feature Flag æ§åˆ¶
const USE_IMPERATIVE_API = featureFlags.get('imperative_name_cell');

const RawNameInTableCanvas: React.FC = (props) => {
  if (USE_IMPERATIVE_API) {
    return renderImperative(props); // æ–¹æ¡ˆ B
  }
  return renderDeclarative(props);   // æ–¹æ¡ˆ A
};

// ç›‘æ§æŒ‡æ ‡ï¼š
// - æ¸²æŸ“è€—æ—¶ï¼ˆP50, P95, P99ï¼‰
// - å¸§ç‡ï¼ˆFPSï¼‰
// - é”™è¯¯ç‡
// - ç”¨æˆ·ä½“éªŒè¯„åˆ†
```

#### **ç­–ç•¥ 3ï¼šæ¸è¿›å¼æ¨å¹¿**

```
ç¬¬ 1 å‘¨ï¼šname å­—æ®µï¼ˆ20% ä»£ç ï¼‰
ç¬¬ 2 å‘¨ï¼šstatus, user å­—æ®µï¼ˆ40% ä»£ç ï¼‰
ç¬¬ 3 å‘¨ï¼šdate, select å­—æ®µï¼ˆ60% ä»£ç ï¼‰
ç¬¬ 4 å‘¨ï¼šå‰©ä½™å­—æ®µï¼ˆ100% ä»£ç ï¼‰

æ¯å‘¨éªŒè¯ï¼š
â”œâ”€ æ€§èƒ½æŒ‡æ ‡
â”œâ”€ é”™è¯¯ç‡
â”œâ”€ ç”¨æˆ·åé¦ˆ
â””â”€ å›æ»šé¢„æ¡ˆ
```

---

### 5.3 é£é™©ä¸åº”å¯¹

| é£é™© | å½±å“ | æ¦‚ç‡ | åº”å¯¹æªæ–½ |
|------|------|------|---------|
| **useMemo ä¾èµ–é—æ¼** | å¯¼è‡´æ¸²æŸ“é”™è¯¯ | ä¸­ | ESLint è§„åˆ™ + Code Review |
| **æ€§èƒ½æå‡ä¸è¾¾é¢„æœŸ** | æ—¶é—´æµªè´¹ | ä½ | å…ˆåš POC éªŒè¯ |
| **React DevTools å¤±æ•ˆ** | è°ƒè¯•å›°éš¾ | ä¸­ | æ·»åŠ è‡ªå®šä¹‰æ—¥å¿— |
| **å›¢é˜ŸæŠµè§¦æ–° API** | æ¨å¹¿å›°éš¾ | ä½ | æŠ€æœ¯åˆ†äº« + æ–‡æ¡£ |
| **å›æ»šå›°éš¾** | å½±å“çº¿ä¸Š | ä½ | Feature Flag æ§åˆ¶ |

---

## ç¬¬å…­ç« ï¼šæ ¸å¿ƒæ´å¯Ÿä¸è®¾è®¡å“²å­¦

### 6.1 å£°æ˜å¼ vs å‘½ä»¤å¼çš„æœ¬è´¨

**å£°æ˜å¼ï¼ˆæ–¹æ¡ˆ Aï¼‰**ï¼š
```
å“²å­¦ï¼šå‘Šè¯‰è®¡ç®—æœº"æˆ‘è¦ä»€ä¹ˆ"ï¼Œä¸å…³å¿ƒ"æ€ä¹ˆåš"

ä¼˜åŠ¿ï¼š
â”œâ”€ æŠ½è±¡å±‚æ¬¡é«˜ï¼Œç¬¦åˆäººç±»æ€ç»´
â”œâ”€ å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œå¿½ç•¥å®ç°ç»†èŠ‚
â”œâ”€ ç»„åˆæ€§å¥½ï¼Œæ˜“äºå¤ç”¨
â””â”€ æ¡†æ¶ä¼˜åŒ–ç©ºé—´å¤§ï¼ˆVirtual DOM Diffï¼‰

ä»£ä»·ï¼š
â”œâ”€ è¿è¡Œæ—¶å¼€é”€ï¼ˆç¼–è¯‘ã€Diffã€è°ƒåº¦ï¼‰
â”œâ”€ æ€§èƒ½ä¸å¯æ§ï¼ˆä¾èµ–æ¡†æ¶ä¼˜åŒ–ï¼‰
â””â”€ å­¦ä¹ æ›²çº¿ï¼ˆéœ€è¦ç†è§£æ¡†æ¶é»‘ç›’ï¼‰
```

**å‘½ä»¤å¼ï¼ˆæ–¹æ¡ˆ B/Cï¼‰**ï¼š
```
å“²å­¦ï¼šå‘Šè¯‰è®¡ç®—æœº"æ€ä¹ˆåš"ï¼Œå®Œå…¨æ§åˆ¶è¿‡ç¨‹

ä¼˜åŠ¿ï¼š
â”œâ”€ æ€§èƒ½å¯æ§ï¼Œæ— æ¡†æ¶é»‘ç›’
â”œâ”€ æ‰§è¡Œè·¯å¾„æ˜ç¡®ï¼Œæ˜“äºæ€§èƒ½è°ƒä¼˜
â””â”€ æ— è¿è¡Œæ—¶å¼€é”€

ä»£ä»·ï¼š
â”œâ”€ æŠ½è±¡å±‚æ¬¡ä½ï¼Œä»£ç ç¹ç
â”œâ”€ å…³æ³¨å®ç°ç»†èŠ‚ï¼Œå¿½ç•¥ä¸šåŠ¡é€»è¾‘
â”œâ”€ å¤æ‚åº¦é«˜ï¼Œæ˜“å‡ºé”™ï¼ˆçŠ¶æ€ç®¡ç†ã€å†…å­˜æ³„æ¼ï¼‰
â””â”€ ç»´æŠ¤æˆæœ¬é«˜
```

---

### 6.2 æ¶æ„é€‰æ‹©çš„æ°¸æ’çœŸç†

#### **çœŸç† 1ï¼šæ²¡æœ‰é“¶å¼¹**

```
ä¸å­˜åœ¨å®Œç¾çš„æ¶æ„æ–¹æ¡ˆï¼Œåªæœ‰æœ€é€‚åˆå½“å‰é˜¶æ®µçš„æ–¹æ¡ˆã€‚

æ–¹æ¡ˆ Aï¼šé€‚åˆå¿«é€Ÿè¿­ä»£ã€å›¢é˜Ÿç†Ÿæ‚‰ã€æ€§èƒ½è¦æ±‚ä¸­ç­‰çš„åœºæ™¯
æ–¹æ¡ˆ Bï¼šé€‚åˆæ€§èƒ½ç“¶é¢ˆæ˜æ˜¾ã€è¿ç§»æˆæœ¬å¯æ§çš„åœºæ™¯
æ–¹æ¡ˆ Cï¼šé€‚åˆæè‡´æ€§èƒ½éœ€æ±‚ã€é•¿æœŸæŠ•å…¥çš„åœºæ™¯
```

#### **çœŸç† 2ï¼šæƒè¡¡æ˜¯å¸¸æ€**

```
æ¶æ„è®¾è®¡å°±æ˜¯åœ¨å¤šä¸ªç»´åº¦ä¹‹é—´åšæƒè¡¡ï¼š
â”œâ”€ æ€§èƒ½ vs å¼€å‘æ•ˆç‡
â”œâ”€ æŠ½è±¡ vs æ§åˆ¶
â”œâ”€ ç®€å• vs çµæ´»
â””â”€ çŸ­æœŸæ”¶ç›Š vs é•¿æœŸæˆæœ¬

project_manager_fe çš„æƒè¡¡ï¼š
â”œâ”€ ç‰ºç‰²ï¼šæè‡´æ€§èƒ½ï¼ˆæ–¹æ¡ˆ C çš„ 7.8 å€æå‡ï¼‰
â””â”€ æ¢å–ï¼šå¿«é€Ÿè¿­ä»£ + ä½ç»´æŠ¤æˆæœ¬ + å›¢é˜Ÿç†Ÿæ‚‰åº¦
```

#### **çœŸç† 3ï¼šæ€§èƒ½ä¼˜åŒ–çš„è¾¹é™…æ•ˆåº”**

```
æ€§èƒ½ä¼˜åŒ–çš„æ”¶ç›Šé€’å‡è§„å¾‹ï¼š

ç¬¬ 1 æ¬¡ä¼˜åŒ–ï¼ˆè™šæ‹Ÿæ»šåŠ¨ï¼‰ï¼š
â”œâ”€ æŠ•å…¥ï¼š2 å‘¨
â”œâ”€ æ”¶ç›Šï¼š300 å€æå‡ï¼ˆ1000ms â†’ 3msï¼‰
â””â”€ æŠ•å…¥äº§å‡ºæ¯”ï¼šæé«˜

ç¬¬ 2 æ¬¡ä¼˜åŒ–ï¼ˆLRU ç¼“å­˜ï¼‰ï¼š
â”œâ”€ æŠ•å…¥ï¼š1 å‘¨
â”œâ”€ æ”¶ç›Šï¼š55 å€æå‡ï¼ˆ550ms â†’ 10msï¼‰
â””â”€ æŠ•å…¥äº§å‡ºæ¯”ï¼šé«˜

ç¬¬ 3 æ¬¡ä¼˜åŒ–ï¼ˆæ–¹æ¡ˆ Bï¼‰ï¼š
â”œâ”€ æŠ•å…¥ï¼š3 å‘¨
â”œâ”€ æ”¶ç›Šï¼š2.4 å€æå‡ï¼ˆä½†ç¼“å­˜åæ— å˜åŒ–ï¼‰
â””â”€ æŠ•å…¥äº§å‡ºæ¯”ï¼šä½

ç¬¬ 4 æ¬¡ä¼˜åŒ–ï¼ˆæ–¹æ¡ˆ Cï¼‰ï¼š
â”œâ”€ æŠ•å…¥ï¼š10 ä¸ªæœˆ
â”œâ”€ æ”¶ç›Šï¼š7.8 å€æå‡ï¼ˆä½†ç”¨æˆ·æ„ŸçŸ¥ä¸æ˜æ˜¾ï¼‰
â””â”€ æŠ•å…¥äº§å‡ºæ¯”ï¼šæä½

ç»“è®ºï¼šä¼˜åŒ–åˆ°"è¶³å¤Ÿå¥½"å³å¯ï¼Œè¿½æ±‚æè‡´æ€§èƒ½å¾€å¾€å¾—ä¸å¿å¤±ã€‚
```

---

### 6.3 ä¸ MVC çš„å“²å­¦æ˜ å°„

```
MVC çš„æ ¸å¿ƒï¼šå…³æ³¨ç‚¹åˆ†ç¦»

project_manager_fe æ··åˆæ¶æ„çš„æ˜ å°„ï¼š
â”œâ”€ Modelï¼ˆæ•°æ®å±‚ï¼‰ï¼šReact Hooks çŠ¶æ€ç®¡ç†
â”œâ”€ Viewï¼ˆè§†å›¾å±‚ï¼‰ï¼šRust Canvas æ¸²æŸ“
â”œâ”€ Controllerï¼ˆæ§åˆ¶å±‚ï¼‰ï¼šJSXRendererMapping æ¡¥æ¥

ä¸‰ç§æ–¹æ¡ˆçš„æ˜ å°„ï¼š
æ–¹æ¡ˆ Aï¼šController ç”¨å£°æ˜å¼ï¼ˆJSXï¼‰
æ–¹æ¡ˆ Bï¼šController ç”¨å‘½ä»¤å¼ï¼ˆç›´æ¥ APIï¼‰
æ–¹æ¡ˆ Cï¼šController å®Œå…¨æ¶ˆå¤±ï¼ˆRust ç»Ÿä¸€ç®¡ç†ï¼‰

å“²å­¦æ´å¯Ÿï¼š
â””â”€ MVC ä¸æ˜¯å›ºå®šæ¨¡å¼ï¼Œè€Œæ˜¯æ°¸æ’åŸåˆ™
   æ— è®ºæŠ€æœ¯æ ˆå¦‚ä½•å˜åŒ–ï¼ˆReactã€Rustã€å‘½ä»¤å¼ã€å£°æ˜å¼ï¼‰
   å…³æ³¨ç‚¹åˆ†ç¦»çš„æ€æƒ³å§‹ç»ˆä¸å˜
```

---

## ç¬¬ä¸ƒç« ï¼šæ€»ç»“ä¸å»ºè®®

### 7.1 ä¸‰ç§æ–¹æ¡ˆçš„æœ€ç»ˆç»“è®º

| æ–¹æ¡ˆ | é€‚ç”¨åœºæ™¯ | æ ¸å¿ƒä¼˜åŠ¿ | æ ¸å¿ƒåŠ£åŠ¿ | æ¨èåº¦ |
|------|---------|---------|---------|--------|
| **Aï¼šReact + å£°æ˜å¼** | å½“å‰ project_manager_fe | å¼€å‘æ•ˆç‡ã€å¯ç»´æŠ¤æ€§ | é¦–æ¬¡æ¸²æŸ“æ…¢ | â­â­â­â­â­ |
| **Bï¼šReact + å‘½ä»¤å¼** | æ€§èƒ½ç“¶é¢ˆ + å¿«é€Ÿä¼˜åŒ– | æ€§èƒ½æå‡ 2.4 å€ï¼Œè¿ç§»æˆæœ¬ä½ | å¯è¯»æ€§ç•¥å·® | â­â­â­â­ |
| **Cï¼šçº¯ Rust** | æè‡´æ€§èƒ½éœ€æ±‚ | æ€§èƒ½æå‡ 7.8 å€ | æˆæœ¬æé«˜ï¼ˆ10 ä¸ªæœˆï¼‰ | â­â­ |

---

### 7.2 ç»™ä¸åŒè§’è‰²çš„å»ºè®®

#### **ç»™æ¶æ„å¸ˆ**

```
âœ… ä¼˜å…ˆè§£å†³æ ¸å¿ƒç“¶é¢ˆï¼ˆè™šæ‹Ÿæ»šåŠ¨ > å•å…ƒæ ¼æ¸²æŸ“ï¼‰
âœ… æ€§èƒ½ä¼˜åŒ–åˆ°"è¶³å¤Ÿå¥½"å³å¯ï¼ˆ60fps > æè‡´æ€§èƒ½ï¼‰
âœ… ä¿ç•™æŠ€æœ¯å€ºå¿è¿˜çš„ä½™åœ°ï¼ˆæ–¹æ¡ˆ B ä½œä¸ºå¤‡é€‰ï¼‰
âŒ ä¸è¦è¿‡æ—©ä¼˜åŒ–ï¼ˆæ€§èƒ½ä¸æ˜¯ç“¶é¢ˆæ—¶ï¼‰
âŒ ä¸è¦è¿½æ±‚æè‡´æ€§èƒ½ï¼ˆè¾¹é™…æ”¶ç›Šé€’å‡ï¼‰
```

#### **ç»™å¼€å‘è€…**

```
âœ… ä¼˜å…ˆä½¿ç”¨å£°æ˜å¼ï¼ˆJSXï¼‰ï¼Œé™¤éæ€§èƒ½æ˜¯ç“¶é¢ˆ
âœ… å–„ç”¨ useMemo ç¼“å­˜ï¼ˆå‡å°‘é‡å¤è®¡ç®—ï¼‰
âœ… ç†è§£æ¡†æ¶å¼€é”€ï¼ˆVirtual DOMã€Reconciliationï¼‰
âŒ ä¸è¦ç›²ç›®ä¼˜åŒ–ï¼ˆå…ˆ Profile å†ä¼˜åŒ–ï¼‰
âŒ ä¸è¦é‡å¤é€ è½®å­ï¼ˆReact Hooks > è‡ªå»ºçŠ¶æ€ç®¡ç†ï¼‰
```

#### **ç»™æŠ€æœ¯ç®¡ç†è€…**

```
âœ… å¹³è¡¡æ€§èƒ½ä¸å¼€å‘æ•ˆç‡ï¼ˆå¿«é€Ÿè¿­ä»£ > æè‡´æ€§èƒ½ï¼‰
âœ… æŠ•èµ„å›¢é˜Ÿèƒ½åŠ›ï¼ˆReact ç†Ÿç»ƒåº¦ > Rust æ·±å…¥åº¦ï¼‰
âœ… å…³æ³¨é•¿æœŸå¯ç»´æŠ¤æ€§ï¼ˆReact ç”Ÿæ€ > è‡ªå»ºç³»ç»Ÿï¼‰
âŒ ä¸è¦ç›²ç›®è¿½æ±‚æ–°æŠ€æœ¯ï¼ˆRust ä¸ä¸€å®šæ˜¯æœ€ä¼˜è§£ï¼‰
âŒ ä¸è¦å¿½è§†äººåŠ›æˆæœ¬ï¼ˆ10 ä¸ªæœˆé‡å†™ vs 3 å‘¨ä¼˜åŒ–ï¼‰
```

---

### 7.3 æœ€ç»ˆç­”æ¡ˆ

**ä¸ºä»€ä¹ˆ project_manager_fe è¿˜éœ€è¦ React Scheduler å‚ä¸æ¸²æŸ“ï¼Ÿ**

```
ä¸æ˜¯"éœ€è¦"ï¼Œè€Œæ˜¯"é€‰æ‹©"ï¼š

1. ä¸šåŠ¡å¤æ‚åº¦ï¼ˆ3,068 è¡Œä»£ç ï¼Œ20+ å­—æ®µç±»å‹ï¼‰
   â†’ React Hooks æ˜¯æœ€é«˜æ•ˆçš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ

2. å¼€å‘æ•ˆç‡ï¼ˆ2 ä¸ªæœˆ MVP vs 10 ä¸ªæœˆé‡å†™ï¼‰
   â†’ JSX å£°æ˜å¼æ˜¯æœ€å¿«çš„å¼€å‘æ–¹å¼

3. å›¢é˜Ÿèƒ½åŠ›ï¼ˆReact ç†Ÿç»ƒ vs Rust åŸºç¡€ï¼‰
   â†’ é€‰æ‹©å›¢é˜Ÿæ“…é•¿çš„æŠ€æœ¯æ ˆ

4. æ€§èƒ½å·²è¾¾æ ‡ï¼ˆç¼“å­˜ + Rust = 60fpsï¼‰
   â†’ è¾¹é™…ä¼˜åŒ–çš„æ”¶ç›Šé€’å‡

5. é•¿æœŸå¯ç»´æŠ¤ï¼ˆReact ç”Ÿæ€ vs è‡ªå»ºç³»ç»Ÿï¼‰
   â†’ é€‰æ‹©æˆç†Ÿçš„ç”Ÿæ€è€Œéé‡å¤é€ è½®å­
```

**èƒ½ä¸èƒ½å®Œå…¨äº¤ç»™ Rust æˆ–ä½¿ç”¨å‘½ä»¤å¼ï¼Ÿ**

```
æŠ€æœ¯ä¸Šï¼šâœ… å¯ä»¥
â”œâ”€ æ–¹æ¡ˆ Bï¼ˆReact + å‘½ä»¤å¼ï¼‰ï¼š2-3 å‘¨è¿ç§»ï¼Œæ€§èƒ½æå‡ 2.4 å€
â””â”€ æ–¹æ¡ˆ Cï¼ˆçº¯ Rustï¼‰ï¼š10 ä¸ªæœˆé‡å†™ï¼Œæ€§èƒ½æå‡ 7.8 å€

å·¥ç¨‹ä¸Šï¼šâš ï¸ ä¸æ¨èï¼ˆå½“å‰é˜¶æ®µï¼‰
â”œâ”€ æ–¹æ¡ˆ Bï¼šæŠ•å…¥äº§å‡ºæ¯”ä½ï¼ˆç¼“å­˜åæ€§èƒ½å·²è¾¾æ ‡ï¼‰
â””â”€ æ–¹æ¡ˆ Cï¼šæˆæœ¬è¿‡é«˜ï¼ˆ10 ä¸ªæœˆ vs 2 ä¸ªæœˆï¼‰

ä½†æ˜¯ï¼šâœ… ä¿ç•™å¤‡é€‰æ–¹æ¡ˆ
â”œâ”€ å¦‚æœæ€§èƒ½æˆä¸ºç“¶é¢ˆ â†’ æ¸è¿›å¼è¿ç§»åˆ°æ–¹æ¡ˆ B
â””â”€ å¦‚æœæè‡´æ€§èƒ½æˆä¸ºæ ¸å¿ƒç«äº‰åŠ› â†’ é•¿æœŸæŠ•å…¥æ–¹æ¡ˆ C
```

---

### 7.4 ä¸€å¥è¯æ€»ç»“

> **React Scheduler å‚ä¸å•å…ƒæ ¼å†…å®¹ç”Ÿæˆï¼Œä¸æ˜¯æ¶æ„çš„ç¼ºé™·ï¼Œè€Œæ˜¯åŸºäºä¸šåŠ¡å¤æ‚åº¦ï¼ˆ3,068 è¡Œï¼‰ã€å›¢é˜Ÿèƒ½åŠ›ï¼ˆReact ç†Ÿç»ƒï¼‰ã€æ€§èƒ½ç°çŠ¶ï¼ˆ60fps è¾¾æ ‡ï¼‰ã€æŠ•å…¥äº§å‡ºæ¯”ï¼ˆ2 ä¸ªæœˆ vs 10 ä¸ªæœˆï¼‰çš„ç†æ€§é€‰æ‹©ã€‚å­˜åœ¨"React + å‘½ä»¤å¼"ï¼ˆæ–¹æ¡ˆ Bï¼‰å’Œ"çº¯ Rust"ï¼ˆæ–¹æ¡ˆ Cï¼‰ä¸¤ç§ä¼˜åŒ–æ–¹æ¡ˆï¼Œä½†åœ¨å½“å‰é˜¶æ®µï¼Œå£°æ˜å¼ï¼ˆæ–¹æ¡ˆ Aï¼‰æ˜¯æœ€ä¼˜è§£â€”â€”å½“æ€§èƒ½è¶³å¤Ÿå¥½æ—¶ï¼Œå¼€å‘æ•ˆç‡å’Œå¯ç»´æŠ¤æ€§æ¯”æè‡´æ€§èƒ½æ›´é‡è¦ã€‚** ğŸ¯

---

## é™„å½•ï¼šå…³é”®ä»£ç è·¯å¾„

### A.1 æ–¹æ¡ˆ A ç¤ºä¾‹ä»£ç 

```typescript
// plugins/fieldPlugins/name/table/display.tsx
const RawNameInTableCanvas: React.FC = (props) => {
  const [textOn, setTextOn] = useState(false);
  const extraContext = useTableStoreState('extraContext');

  return (
    <CDK.Row>
      <CDK.Text text={props.data.name} />
      {textOn && <CDK.Icon name="edit" />}
    </CDK.Row>
  );
};
```

### A.2 æ–¹æ¡ˆ B æ”¹å†™ç¤ºä¾‹

```typescript
const RawNameInTableCanvas: React.FC = (props) => {
  const [textOn, setTextOn] = useState(false);
  const extraContext = useTableStoreState('extraContext');

  return useMemo(() => {
    const elements = [CDK.createText({ text: props.data.name })];
    if (textOn) elements.push(CDK.createIcon({ name: 'edit' }));
    return CDK.createRow({ children: elements });
  }, [props.data.name, textOn]);
};
```

### A.3 æ–¹æ¡ˆ C ä¼ªä»£ç 

```rust
pub fn render_name_cell(cell_id: &str, props: &CellProps) -> CDKElement {
    let text_on = STATE_MANAGER.get_text_on(cell_id);
    let mut elements = vec![CDK::create_text(&props.data.name)];
    if text_on {
        elements.push(CDK::create_icon("edit"));
    }
    CDK::create_row(elements)
}
```

---

> å†™ä½œæ—¥æœŸï¼š2024å¹´2æœˆ
> å­—æ•°ç»Ÿè®¡ï¼šçº¦16,000å­—
> æŠ€æœ¯æ·±åº¦ï¼šâ­â­â­â­â­ï¼ˆææ·±ï¼‰
> é€‚åˆè¯»è€…ï¼šéœ€è¦æ·±å…¥ç†è§£æ¶æ„å†³ç­–ã€æˆæœ¬æ”¶ç›Šåˆ†æçš„å‰ç«¯æ¶æ„å¸ˆå’ŒæŠ€æœ¯ç®¡ç†è€…

[PROTOCOL]: å˜æ›´æ—¶æ›´æ–°æ­¤å¤´éƒ¨ï¼Œç„¶åæ£€æŸ¥ CLAUDE.md
